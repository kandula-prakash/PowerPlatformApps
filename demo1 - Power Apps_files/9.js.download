(window.bundleExecutionMarkers=window.bundleExecutionMarkers||{})["scripts/9.js?v=1.4.3886-master"]={begin:performance.now()},(window.__wpJsonpUci=window.__wpJsonpUci||[]).push([[9],{a8zb:function(t,e,i){"use strict";i.d(e,"a",(function(){return Gt})),i.d(e,"b",(function(){return $t})),i.d(e,"c",(function(){return Yt}));var r=i("SoYb"),n=i("Uv1Y"),a=i("TBkx"),s=i("LbMF"),o=i("iZ7K"),u=i("0oMj"),l=i("SAYH"),c=i("Nzmy"),g=i("+5Bq"),h=i("wHbR"),d=i("vNXc"),b=i("FZDd"),_=i("ROKC"),y=i("d+dp"),m=i("5qiD"),f=i("/oKV");var p=i("84PK"),O=i("umme"),C=i("504W");class j{constructor(t,e,i){this._name=null,this._entity=null,this._name=t,this._entity=i}get_entity(){return this._entity}get_name(){return this._name}}var E=i("I1N9"),w=i("YIt1");class A{constructor(t,e,i,r){this._name=null,this._descending=!1,this._entity=null,this._name=t,this._descending=i,this._entity=r}get_entity(){return this._entity}get_descending(){return this._descending}get_name(){return this._name}}var x=i("eruq");class N{constructor(t,e,i){this.joinType=0,this.fetchXmlDoc=null,this.entityName=null,this.attributesByName=null,this.attributes=null,this.orderByAttributes=null,this.groupByAttributes=null,this.aggregateAttributes=null,this.linkedEntities=null,this.parentEntity=null,this.baseEntity=null,this.filterExpression=null,this.hasAggregate=!1,this.tableAlias=null,this.tableAliasCount=0,this.tableAliases=null,this.useLimitStatement=!0,this.top=5e3,this.offset=1,this.entityName=t,this.tableAliasCount=0,this.tableAliases=[],this.tableAlias=this.generateTableAlias(this.entityName),this.attributes=new Array(0),this.attributesByName={},this.orderByAttributes=new Array(0),this.groupByAttributes=new Array(0),this.aggregateAttributes=new Array(0),this.linkedEntities=new Array(0),this.alias=null,this.parentEntity=e,e?(this.baseEntity=e.baseEntity,this.joinType=Object(C.a)(i)?N.innerJoin:i):this.baseEntity=this}get_top(){return this.top}set_top(t){return this.top=t,t}get_offset(){return this.offset}set_offset(t){return this.offset=t,t}get_linkedEntities(){return this.linkedEntities}get_joinType(){return this.joinType}get_orderByAttributes(){return this.orderByAttributes}get_attributesByName(){return this.attributesByName}get_attributes(){return this.attributes}get_entityName(){return this.entityName}get_Alias(){return this.alias}get_fetchXml(){return Object(C.a)(this.fetchXmlDoc)?"":Object(x.a)(this.fetchXmlDoc.firstChild).get_outerXml()}get_parentEntity(){return this.parentEntity}get_baseEntity(){return this.baseEntity}get_filterExpression(){return this.filterExpression}set_filterExpression(t){return this.filterExpression=t,t}get_tableAlias(){return this.tableAlias}get_useLimitStatement(){return this.useLimitStatement}set_useLimitStatement(t){return this.useLimitStatement=t,t}generateTableAlias(t){if(!Object(C.b)(t)){const e=String.format("{0}{1}",t,this.tableAliasCount++);return this.tableAliases.push(e),e}return""}initialize(t){this.fetchXmlDoc=Object(x.b)(t.get_outerXml()),this.hasAggregate="true"===this.getAttributeValue(t,"aggregate");const e=this.getAttributeValue(t,"count");e&&(this.top=Number.parseInvariant(e));const i=this.getAttributeValue(t,"page");i&&(this.offset=Number.parseInvariant(i));let r=t.selectSingleNode("entity");if(Object(C.a)(r)&&"link-entity"===t.get_tagName()&&(r=t),Object(C.a)(this.parentEntity)){const t=this.getAttributeValue(r,"name");this.tableAliasCount=0,this.tableAliases=[],this.tableAlias=this.generateTableAlias(t),this.baseEntity=this}this._parser(r)}initializeFromFetchXml(t){const e=Object(x.b)(t);this.initialize(Object(x.a)(e).selectSingleNode("fetch"))}removeAttributesAndOrder(t){const e=new Array(0);for(let i=0,r=t.childNodes.length;i<r;i++){const r=t.childNodes[i];switch(r.nodeName){case"attribute":case"order":e[e.length]=r;break;case"link-entity":this.removeAttributesAndOrder(r)}}for(let i=0;i<e.length;i++)t.removeChild(e[i])}addAttribute(t,e){const i=new j(t,null,this);this.get_attributesByName()[t]=i,this.get_attributes()[this.get_attributes().length]=i}addOrderByAttribute(t,e){const i=new A(t,this.tableAlias,e,this);this.orderByAttributes[this.orderByAttributes.length]=i}_parser(t){this.entityName=this.getAttributeValue(t,"name");const e=t.childNodes();for(let t=0;t<e.get_count();t++){const i=e.get_item(t);if(Object(C.a)(i.get_tagName()))continue;switch(i.get_tagName().toLocaleLowerCase()){case"attribute":const t=this.getAttributeValue(i,"name"),e=this.getAttributeValue(i,"alias"),r=new j(t,e,this);this.attributesByName[e||t]=r,this.attributes[this.attributes.length]=r;this.getAttributeValue(i,"aggregate")&&(this.aggregateAttributes[this.aggregateAttributes.length]=r);const n=this.getAttributeValue(i,"groupby");n&&"true"===n&&(this.groupByAttributes[this.groupByAttributes.length]=r);break;case"order":const a=this.getAttributeValue(i,"alias"),s=this.getAttributeValue(i,"attribute"),o=this.getAttributeValue(i,"descending"),u=new A(s,a,!!o&&"true"===o,this);this.orderByAttributes[this.orderByAttributes.length]=u;break;case"link-entity":const l=this.getAttributeValue(i,"name"),c=this.getAttributeValue(i,"from"),g=this.getAttributeValue(i,"to"),h=this.getAttributeValue(i,"alias"),d=new S(l,this);d.setLinkProperties(c,g,"eq",this.getLinkType(i),h),d.initialize(i),this.linkedEntities[this.linkedEntities.length]=d;break;case"filter":const b=this.getAttributeValue(i,"type");let _=0;b&&"or"===b.toLowerCase()&&(_=w.a.Or),this.filterExpression=new E.a(_,this.get_entityName()),this.filterExpression=this.filterParser(i,this.filterExpression)}}}filterParser(t,e){const i=t.childNodes();for(let t=0;t<i.get_count();t++){const r=i.get_item(t);if(Object(C.a)(r.get_tagName()))continue;switch(r.get_tagName().toLocaleLowerCase()){case"filter":const i=this.getAttributeValue(r,"type");let n=0;i&&"or"===i.toLowerCase()&&(n=w.a.Or);let a=new E.a(n,"tempValue");a=this.filterParser(r,a),e.addFilterExpression(a);break;case"condition":const s=this.getAttributeValue(r,"attribute"),o=this.getAttributeValue(r,"operator"),u=this.getAttributeValue(r,"value"),l=this.getAttributeValue(r,"uitype");if(t||e.set_filterExpressionId(s),Object(C.b)(u)){const t=r.childNodes();if(t.get_count()>0){const i=[];for(let e=0;e<t.get_count();e++){const r=t.get_item(e);Object(C.a)(r.get_innerText())||i.push(t.get_item(e).get_innerText())}e.addCondition(s,o,i)}else e.addCondition(s,o);if(e.get_conditions().length>0){e.get_conditions()[e.get_conditions().length-1].set_entityName(l)}}else e.addCondition(s,o,u)}}return e}getAttributeValue(t,e){return t.getAttribute(e)}getLinkType(t){const e=this.getAttributeValue(t,"link-type");if(!e)return N.innerJoin;switch(e){case"natural":return 2;case"inner":return N.innerJoin;case"outer":return 1;case"matchfirstrowusingcrossapply":return 3;case"exists":return 5;case"in":return 4;default:throw Error.create("EntityQueryExpression.GetLinkType: Invalid join type!")}}}N.innerJoin=0;class S extends N{constructor(t,e,i){super(),this._linkToAttribute=null,this._linkFromAttribute=null,this._conditionOperator=null,this.entityName=t,this.attributes=new Array(0),this.attributesByName={},this.orderByAttributes=new Array(0),this.groupByAttributes=new Array(0),this.aggregateAttributes=new Array(0),this.linkedEntities=new Array(0),this.parentEntity=e,e&&(this.baseEntity=e.get_baseEntity(),this.tableAlias=this.baseEntity.generateTableAlias(this.entityName),this.joinType=Object(C.a)(i)?N.innerJoin:i)}get_linkToAttribute(){return this._linkToAttribute}get_linkFromAttribute(){return this._linkFromAttribute}get_conditionOperator(){return this._conditionOperator}setLinkProperties(t,e,i,r,n){this._linkFromAttribute=t,this._linkToAttribute=e,this._conditionOperator=i,this.joinType=r,this.alias=n}}var k=i("WRF3"),L=i("YhOF"),v=i("67s4"),F=i("XvL5"),Q=i("/bjP"),T=i("8tWD");var B,q=i("2mBq");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */!function(t){t[t.inner=0]="inner",t[t.leftOuter=1]="leftOuter",t[t.outer=2]="outer"}(B||(B={}));var D=i("jZCH"),I=i("/A0C");function M(t){switch(t.toLowerCase()){case"eq":case"eq-userid":return"=";case"ne":case"ne-userid":return"!=";case"gt":return">";case"ge":return">=";case"lt":return"<";case"le":return"<=";case"like":case"begins-with":case"ends-with":return"like";case"not-like":case"not-begin-with":case"not-end-with":return"not like";case"eq-userteams":case"eq-useroruserteams":case"in":return"in";case"not-in":return"not in";case"between":return"between";case"not-between":return"not between";case"not-null":return"is not null";case"null":return"is null";default:throw Error.create("Invalid condition operator type!")}}function P(t){switch(t){case 0:return"and";case w.a.Or:return"or";default:throw Error.create("Invalid logical operator type!")}}function V(t,e){const i=D.a.get_DefaultInstance().get_MetadataCache().getAttributeMetadata(e,t);if(!Object(C.a)(i))return i;throw Error.create(Object(q.a)("Attribute {0} is not present in the metadata for entity {1}",t,e))}class R extends class{}{constructor(t){super(),this._strategy=null,this._tableAlias="",this._entityName="",this._strategy=t}_visitAttributeExpression(t){this._strategy.addAttribute(t,this._tableAlias)}_visitColumnSetExpression(t){for(const e of t)this._visitAttributeExpression(e)}_visitConditionExpression(t){!function(t){switch(t){case"ne":case"not-in":case"not-like":case"not-begin-with":case"not-end-with":return!0;default:return!1}}(t.get_operator())?this._strategy.addCondition(t.get_attributeName(),t.get_operator(),t.get_value(),this._entityName,this._tableAlias):(this._strategy.beginWritingFilter(w.a.Or),this._strategy.addCondition(t.get_attributeName(),t.get_operator(),t.get_value(),this._entityName,this._tableAlias),this._strategy.addCondition(t.get_attributeName(),"null",null,this._entityName,this._tableAlias),this._strategy.endWritingFilter())}_visitFilterExpression(t){if(!Object(C.a)(t)){if(this._strategy.beginWritingFilter(t.get_filterOperator()),!Object(C.a)(t.get_conditions()))for(const e of t.get_conditions())this._visitConditionExpression(e);if(!Object(C.a)(t.get_filterExpressions()))for(const e of t.get_filterExpressions())this._visitFilterExpression(e);this._strategy.endWritingFilter()}}_visitLinkEntityExpression(t){const e=this._entityName;this._tableAlias=t.get_tableAlias(),this._entityName=t.get_entityName(),this._strategy.beginWritingLinkEntity(t),this._visitColumnSetExpression(t.get_attributes()),this._visitFilterExpression(t.get_filterExpression()),this._strategy.addLinkEntityFromClause(t);for(const e of t.get_orderByAttributes())this._visitOrderByQueryExpression(e);this._strategy.endWritingLinkEntity(t);for(const e of t.get_linkedEntities())this._visitLinkEntityExpression(e);this._entityName=e}_visitOrderByQueryExpression(t){this._strategy.addOrderByClause(t,this._tableAlias)}visitEntityExpression(t){this._tableAlias=t.get_tableAlias(),this._entityName=t.get_entityName(),this._strategy.addLimitClause(t),this._strategy.addOffsetClause(t),this._visitColumnSetExpression(t.get_attributes());for(const e of t.get_orderByAttributes())this._visitOrderByQueryExpression(e);this._strategy.addFromClause(t),this._visitFilterExpression(t.get_filterExpression());for(const e of t.get_linkedEntities())this._visitLinkEntityExpression(e)}}class U extends class{constructor(){this._EntityQueryExpression=null,this._Visitor=null,this._Strategy=null}get_entityQueryExpression(){return this._EntityQueryExpression}set_entityQueryExpression(t){return this._EntityQueryExpression=t,t}get_visitor(){return this._Visitor}set_visitor(t){return this._Visitor=t,t}get_strategy(){return this._Strategy}set_strategy(t){return this._Strategy=t,t}}{constructor(t,e){super(),this.set_strategy(t),this.set_visitor(new R(t)),this.set_entityQueryExpression(e)}getSql(){return this.get_visitor().visitEntityExpression(this.get_entityQueryExpression()),this.get_strategy().generateQueryText()}}var X=i("Ydwo");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class z{constructor(){this.dateTimeBehavior=0}validateAttribute(t,e){const i=V(t,e);if(i.get_type()!==I.a.DateTime)throw Error.create("Attribute Type is not DateTime though the given condition operator is of DateTime type.");this.dateTimeBehavior=i.get_behavior()}getQueryForCondition(t,e,i,r){return this.validateAttribute(t,i),this.generateSQLiteQueryString(t,e,i,r)}}var G=i("olF5"),W=i("3c60");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
class J extends z{constructor(){super(),this.xValue=0,this.endUTCDate=null,this.currUTCDateMidnight=null}setXValue(t){Object(G.b)(t,"Last X input Value"),this.xValue=Number.parseLocale(t),Object(G.a)(this.xValue,"Last X input Value cannot be negative")}setEndDate(){let t=Object(W.f)();this.endUTCDate=Object(W.a)(t,this.dateTimeBehavior),t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),this.currUTCDateMidnight=Object(W.a)(t,this.dateTimeBehavior)}}var $=i("MXaZ");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class Y extends J{generateSQLiteQueryString(t,e,i,r){this.setXValue(r),this.setEndDate();const n=Object($.g)(this.currUTCDateMidnight,-1*this.xValue);return Object(W.d)(e,t,n,this.endUTCDate)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class K extends z{generateSQLiteQueryString(t,e,i,r){return(new Y).getQueryForCondition(t,e,i,"7")}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class H extends z{generateSQLiteQueryString(t,e,i,r){const n=Object(W.f)();let a=new Date(n.getFullYear(),n.getMonth(),1),s=Object($.h)(a,-1);return s=Object(W.a)(s,this.dateTimeBehavior),a=Object(W.a)(a,this.dateTimeBehavior),Object(W.c)(e,t,s,a)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class Z extends z{generateSQLiteQueryString(t,e,i,r){let n=Object(W.g)(),a=Object($.i)(n,-1);return a=Object(W.a)(a,this.dateTimeBehavior),n=Object(W.a)(n,this.dateTimeBehavior),Object(W.c)(e,t,a,n)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class tt extends J{generateSQLiteQueryString(t,e,i,r){this.setXValue(r),this.setEndDate();const n=Object($.h)(this.currUTCDateMidnight,-1*this.xValue);return Object(W.d)(e,t,n,this.endUTCDate)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class et extends J{generateSQLiteQueryString(t,e,i,r){this.setXValue(r),this.setEndDate();const n=Object($.i)(this.currUTCDateMidnight,-1*this.xValue);return Object(W.d)(e,t,n,this.endUTCDate)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class it extends J{generateSQLiteQueryString(t,e,i,r){this.setXValue(r),this.setEndDate();const n=Object($.j)(this.currUTCDateMidnight,-1*this.xValue);return Object(W.d)(e,t,n,this.endUTCDate)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class rt extends z{generateSQLiteQueryString(t,e,i,r){const n=Object(W.f)();let a=new Date(n.getFullYear(),0,1),s=Object($.j)(a,-1);return s=Object(W.a)(s,this.dateTimeBehavior),a=Object(W.a)(a,this.dateTimeBehavior),Object(W.c)(e,t,s,a)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class nt extends z{constructor(){super(),this.xValue=0,this.startUTCDate=null,this.currUTCDateMidnight=null}setXValue(t){Object(G.b)(t,"Next X input Value"),this.xValue=Number.parseLocale(t),Object(G.a)(this.xValue,"Next X input Value cannot be negative")}setStartDate(){let t=Object(W.f)();this.startUTCDate=Object(W.a)(t,this.dateTimeBehavior),(t.getHours()||t.getMinutes()||t.getSeconds()||t.getMilliseconds())&&(t=Object($.g)(t,1)),t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),this.currUTCDateMidnight=Object(W.a)(t,this.dateTimeBehavior)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class at extends nt{generateSQLiteQueryString(t,e,i,r){this.setXValue(r),this.setStartDate();const n=Object($.g)(this.currUTCDateMidnight,this.xValue);return Object(W.c)(e,t,this.startUTCDate,n)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class st extends z{generateSQLiteQueryString(t,e,i,r){return(new at).getQueryForCondition(t,e,i,"7")}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class ot extends z{generateSQLiteQueryString(t,e,i,r){const n=Object(W.f)(),a=new Date(n.getFullYear(),n.getMonth(),1);let s=Object($.h)(a,1),o=Object($.h)(s,1);return s=Object(W.a)(s,this.dateTimeBehavior),o=Object(W.a)(o,this.dateTimeBehavior),Object(W.c)(e,t,s,o)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class ut extends z{generateSQLiteQueryString(t,e,i,r){const n=Object(W.g)();let a=Object($.i)(n,1),s=Object($.i)(a,1);return a=Object(W.a)(a,this.dateTimeBehavior),s=Object(W.a)(s,this.dateTimeBehavior),Object(W.c)(e,t,a,s)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class lt extends nt{generateSQLiteQueryString(t,e,i,r){this.setXValue(r),this.setStartDate();const n=Object($.h)(this.currUTCDateMidnight,this.xValue);return Object(W.c)(e,t,this.startUTCDate,n)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class ct extends nt{generateSQLiteQueryString(t,e,i,r){this.setXValue(r),this.setStartDate();const n=Object($.i)(this.currUTCDateMidnight,this.xValue);return Object(W.c)(e,t,this.startUTCDate,n)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class gt extends nt{generateSQLiteQueryString(t,e,i,r){this.setXValue(r),this.setStartDate();const n=Object($.j)(this.currUTCDateMidnight,this.xValue);return Object(W.c)(e,t,this.startUTCDate,n)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class ht extends z{generateSQLiteQueryString(t,e,i,r){const n=Object(W.f)(),a=new Date(n.getFullYear(),0,1);let s=Object($.j)(a,1),o=Object($.j)(s,1);return s=Object(W.a)(s,this.dateTimeBehavior),o=Object(W.a)(o,this.dateTimeBehavior),Object(W.c)(e,t,s,o)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class dt extends z{generateSQLiteQueryString(t,e,i,r){let n=Object(W.b)(r);n=Object(W.e)(n);let a=Object($.g)(n,1);return n=Object(W.a)(n,this.dateTimeBehavior),a=Object(W.a)(a,this.dateTimeBehavior),Object(W.c)(e,t,n,a)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class bt extends z{generateSQLiteQueryString(t,e,i,r){let n=Object(W.b)(r);n=Object(W.e)(n);const a=Object(W.a)(n,this.dateTimeBehavior);return this._CreateQuery(e,t,a)}_CreateQuery(t,e,i){const r=Object(q.a)("rtrim([{0}].[{1}])",t,e),n=Object($.v)(i);return Object(q.a)(" {0} >= {1} ",r,n)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class _t extends z{generateSQLiteQueryString(t,e,i,r){let n=Object(W.b)(r);n=Object(W.e)(n),n=Object($.g)(n,1);const a=Object(W.a)(n,this.dateTimeBehavior);return this._CreateQuery(e,t,a)}_CreateQuery(t,e,i){const r=Object(q.a)("rtrim([{0}].[{1}])",t,e),n=Object($.v)(i);return Object(q.a)(" {0} < {1} ",r,n)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class yt extends z{generateSQLiteQueryString(t,e,i,r){const n=Object(W.f)();let a=new Date(n.getFullYear(),n.getMonth(),1),s=Object($.h)(a,1);return a=Object(W.a)(a,this.dateTimeBehavior),s=Object(W.a)(s,this.dateTimeBehavior),Object(W.c)(e,t,a,s)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class mt extends z{generateSQLiteQueryString(t,e,i,r){let n=Object(W.g)(),a=Object($.i)(n,1);return n=Object(W.a)(n,this.dateTimeBehavior),a=Object(W.a)(a,this.dateTimeBehavior),Object(W.c)(e,t,n,a)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class ft extends z{generateSQLiteQueryString(t,e,i,r){const n=Object(W.f)();let a=new Date(n.getFullYear(),0,1),s=Object($.j)(a,1);return a=Object(W.a)(a,this.dateTimeBehavior),s=Object(W.a)(s,this.dateTimeBehavior),Object(W.c)(e,t,a,s)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class pt extends z{generateSQLiteQuery(t,e,i,r){const n=Object(W.f)(),a=Object($.g)(n,r);return(new dt).getQueryForCondition(t,e,i,a)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class Ot extends pt{generateSQLiteQueryString(t,e,i,r){return this.generateSQLiteQuery(t,e,i,0)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class Ct extends pt{generateSQLiteQueryString(t,e,i,r){return this.generateSQLiteQuery(t,e,i,1)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class jt extends pt{generateSQLiteQueryString(t,e,i,r){return this.generateSQLiteQuery(t,e,i,-1)}}class Et{constructor(){this._LimitClause={str:""},this._OffsetClause={str:""},this._SelectClause={str:""},this._FromClause=null,this._JoinClauses=null,this._WhereClause={str:""},this._OrderByClause={str:""},this._DistinctClause={str:""},this._MUIAttributes=null,this.set_fromClause(null),this._set_joinClauses([]),this._set_muiAttributes({})}get_limitClause(){return this._LimitClause}get_offsetClause(){return this._OffsetClause}get_selectClause(){return this._SelectClause}get_fromClause(){return this._FromClause}set_fromClause(t){return this._FromClause=t,t}get_joinClauses(){return this._JoinClauses}_set_joinClauses(t){return this._JoinClauses=t,t}get_whereClause(){return this._WhereClause}get_orderByClause(){return this._OrderByClause}get_distinctClause(){return this._DistinctClause}get_muiAttributes(){return this._MUIAttributes}_set_muiAttributes(t){return this._MUIAttributes=t,t}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class wt{constructor(t,e,i){this._FromClauseFormat=null,this._Entity=null,this._set_fromClauseFormat(e),this._set_entity(i)}get_fromClauseFormat(){return this._FromClauseFormat}_set_fromClauseFormat(t){return this._FromClauseFormat=t,t}get_entity(){return this._Entity}_set_entity(t){return this._Entity=t,t}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class At{constructor(t){this._sqlClause="",this._logicalOperator=null,this._conditionCount=0,this._logicalOperator=t,this._conditionCount=0}appendCondition(t){Object(C.b)(t)||(this._conditionCount>0&&(this._sqlClause+=Object(q.a)(" {0} ",this._logicalOperator)),this._sqlClause+=t,this._conditionCount++)}getSql(){return this._sqlClause.length>0?`(${this._sqlClause})`:""}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class xt{constructor(){this._ConditionBuilders=null,this.set_conditionBuilders([])}BeginWritingFilter(t){this.get_conditionBuilders().push(this.createConditionBuilder(t))}EndWritingFilter(){const t=this.get_conditionBuilders()[this.get_conditionBuilders().length-1];if(this.get_conditionBuilders().splice(this.get_conditionBuilders().length-1,1),this.get_conditionBuilders().length>0)this.get_conditionBuilders()[this.get_conditionBuilders().length-1].appendCondition(t.getSql());else{const e=t.getSql();this.get_WhereClause().str.length>0&&e.length>0&&(this.get_WhereClause().str+=Object(q.a)(" {0} ",P(0))),this.get_WhereClause().str+=e}}createConditionBuilder(t){return new At(P(t))}AppendCondition(t){this.get_conditionBuilders()[this.get_conditionBuilders().length-1].appendCondition(t)}GetSql(){return this.get_WhereClause().str}get_conditionBuilders(){return this._ConditionBuilders}set_conditionBuilders(t){return this._ConditionBuilders=t,t}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class Nt extends xt{constructor(){super(...arguments),this._whereClause={str:""}}get_WhereClause(){return this._whereClause}GetSql(){if(0!==this.get_conditionBuilders().length)throw Error.create("The ConditionBuilders stack is not empty - the generation of the LinkEntityPredicate is not complete, which means the SQL cannot be generated for it yet");return super.GetSql()}Reset(){this._whereClause.str="",this.set_conditionBuilders([])}}class St{constructor(t,e,i){this._JoinCount=0,this._AttributeMetadata=null,this.set_attributeMetadata(t),this.set_joinCount(i)}get_joinCount(){return this._JoinCount}set_joinCount(t){return this._JoinCount=t,t}get_attributeMetadata(){return this._AttributeMetadata}set_attributeMetadata(t){return this._AttributeMetadata=t,t}}class kt extends xt{constructor(t){super(),this._set_queryContainer(t)}get_WhereClause(){return this.get_queryContainer().get_whereClause()}get_queryContainer(){return this._QueryContainer}_set_queryContainer(t){return this._QueryContainer=t,t}}var Lt=i("LFDu"),vt=i("bRS5"),Ft=i("03Hu");var Qt=i("lR0U"),Tt=i("b2mI");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
const Bt={[I.a.UniqueIdentifier]:["null","not-null","in","not-in","eq","ne","gt","ge","lt","le","eq-userid","ne-userid"],[I.a.Boolean]:["null","not-null","eq","ne","like","not-like","begins-with","not-begin-with","ends-with","not-end-with","in","not-in"],[I.a.String]:["null","not-null","eq","ne","like","not-like","begins-with","not-begin-with","ends-with","not-end-with"],[I.a.PickList]:["null","not-null","eq","ne","like","not-like","begins-with","not-begin-with","ends-with","not-end-with","in","not-in"],[I.a.State]:["null","not-null","eq","ne","like","not-like","begins-with","not-begin-with","ends-with","not-end-with","in","not-in"],[I.a.Status]:["null","not-null","eq","ne","like","not-like","begins-with","not-begin-with","ends-with","not-end-with","in","not-in"],[I.a.EntityName]:["null","not-null","eq","ne","like","not-like","begins-with","not-begin-with","ends-with","not-end-with","in","not-in"],[I.a.Customer]:["null","not-null","eq","ne","in","not-in"],[I.a.Lookup]:["null","not-null","in","not-in","eq","ne","eq-userid","ne-userid"],[I.a.Owner]:["null","not-null","in","not-in","eq","ne","eq-userid","ne-userid","eq-userteams","eq-useroruserteams"],[I.a.Integer]:["eq","ne","null","not-null","gt","ge","lt","le"],[I.a.BigInt]:["eq","ne","null","not-null","gt","ge","lt","le"],[I.a.Double]:["eq","ne","null","not-null","gt","ge","lt","le"],[I.a.Decimal]:["eq","ne","null","not-null","gt","ge","lt","le"],[I.a.Money]:["eq","ne","null","not-null","gt","ge","lt","le"],[I.a.DateTime]:["on-or-after","on","on-or-before","today","tomorrow","yesterday","next-seven-days","last-seven-days","next-week","last-week","this-week","next-month","last-month","this-month","next-year","last-year","this-year","last-x-days","next-x-days","last-x-weeks","next-x-weeks","last-x-months","next-x-months","last-x-years","next-x-years","not-null","null","not-null","eq","ne","gt","ge","lt","le"]};class qt extends class{constructor(){this.queryContainer=null,this._predicateBuilders=null,this.localizedLabelJoinCounter=-1,this.queryContainer=new Et,this._predicateBuilders=[],this._predicateBuilders.push(new kt(this.queryContainer))}get_muiAttributes(){return this.queryContainer.get_muiAttributes()}get_languageId(){return D.a.get_DefaultInstance().get_UserContext().get_UserSettings().get_languageId()}get_baseLanguageId(){return D.a.get_DefaultInstance().get_UserContext().get_organizationSettings().get_languageCode()}get_needTwoJoinsToLocalizedLabelTable(){return this.get_languageId()!==this.get_baseLanguageId()}_get_CurrentPredicateBuilder(){return this._predicateBuilders[this._predicateBuilders.length-1]}addAttribute(t,e){this.throwIfNullOrUndefined(t.get_entity(),"AttributeQueryExpression has no parent EntityQueryExpression");const i=D.a.get_DefaultInstance().get_MetadataCache().getAttributeMetadata(t.get_entity().get_entityName(),t.get_name());this.throwIfNullOrUndefined(i,Object(q.a)("attributeMetadata: {0}.{1}",t.get_entity().get_entityName(),t.get_name())),this.throwIfAttributeUnsupported(i);const r=t.get_entity().get_entityName(),n=D.a.get_DefaultInstance().get_MetadataCache().getEntityMetadata(r);this.throwIfNullOrUndefined(n,Object(q.a)("entityMetadata: ",r)),this._HasMultipleLabels(i,n)?this.queryContainer.get_selectClause().str+=this._GetLocalizedAttributeName(e,i,n):this.queryContainer.get_selectClause().str+=Object(q.a)("{0} [{1}].[{2}] as [{3}]",Object(C.b)(this.queryContainer.get_selectClause().str)?"":",",e,this.getAttributePhysicalName(t.get_name(),t.get_entity().get_entityName()),this._GetResultColumnName(t)),this.addChildAttributes(t.get_name(),t.get_entity().get_entityName(),e)}_GetResultColumnName(t){let e=this.getAttributePhysicalName(t.get_name(),t.get_entity().get_entityName());return Object(C.b)(t.get_entity().get_Alias())||(e=t.get_entity().get_Alias()+"."+e),e}addFromClause(t){const e=`${Object(q.a)("[{{0}}] as [{1}]",t.get_entityName(),t.get_tableAlias())}${this.localizedOuterJoinClause(t)}`;this.queryContainer.set_fromClause(new wt(t.get_tableAlias(),e,t.get_entityName()))}addLinkEntityFromClause(t){const e=t.get_parentEntity().get_tableAlias();let i="";const r=this._GetLinkAttribute(t,t.get_linkToAttribute(),t.get_parentEntity().get_entityName()),n=this._GetLinkAttribute(t,t.get_linkFromAttribute(),t.get_entityName()),a=this.getAttributePhysicalName(r,t.get_parentEntity().get_entityName()),s=this.getAttributePhysicalName(n,t.get_entityName()),o=Object(q.a)(" [{1}].[{0}] ",a,e);if(i+=Object(q.a)(" {0} ",function(t){switch(t){case 0:return"inner join";case B.leftOuter:return"left outer join";default:throw Error.create("Invalid join operator type!")}}(t.get_joinType())),i+=Object(q.a)("[{0}] as [{1}]",t.get_entityName(),t.get_tableAlias()),i+=Object(q.a)(" on ({0} {1} [{2}].[{3}]",o,M(t.get_conditionOperator()),t.get_tableAlias(),s),this._get_CurrentPredicateBuilder()instanceof Nt){const t=this._get_CurrentPredicateBuilder();if(null!==t){const e=t.GetSql();e.length>0&&(i+=Object(q.a)(" and {0}",e)),t.Reset(),i+=")"}}i+=this.localizedOuterJoinClause(t),this.queryContainer.get_joinClauses().push(new wt(t.get_tableAlias(),i,t.get_entityName()))}_GetLinkAttribute(t,e,i){let r=e;if((Object(C.a)(r)||Object(C.b)(r))&&!Object(C.a)(i)){const t=D.a.get_DefaultInstance().get_MetadataCache().getEntityMetadata(i);Object(C.a)(t)||(r=t.get_primaryIdAttribute())}return r}addCondition(t,e,i,r,n){let a,s="";const o=this.getAttributePhysicalName(t,r);let u="";if(this.throwIfOperationOnAttributeNotSupported(t,r,e),!Object(C.a)(i)||this._IsConditionWithNoValue(e))switch(e){case"in":case"not-in":let l="";a=i;for(let e=0;e<a.length;e++)l.length>0&&(l+=", "),l+=Object(q.a)("'{0}'",this._GetOperandValue(t,r,a[e]));u=Object(q.a)("({0})",l),s+=this.getQueryForCondition(n,t,r,e,u);break;case"between":case"not between":a=i,u=Object(q.a)("'{0}' and '{1}'",this._GetOperandValue(t,r,a[0]),this._GetOperandValue(t,r,a[1])),s+=this.getQueryForCondition(n,t,r,e,u);break;case"begins-with":case"ends-with":case"not-begin-with":case"not-end-with":"begins-with"===e||"not-begin-with"===e?u=Object(q.a)("'{0}%'",this._GetOperandValue(t,r,i)):"ends-with"!==e&&"not-end-with"!==e||(u=Object(q.a)("'%{0}'",this._GetOperandValue(t,r,i))),s+=this.getQueryForCondition(n,t,r,e,u);break;case"eq-userid":case"ne-userid":u=Object(q.a)("'{0}'",D.a.get_DefaultInstance().get_UserContext().get_UserId().toString()),s+=this.getQueryForCondition(n,t,r,e,u);break;case"eq-userteams":case"eq-useroruserteams":u=this._GenerateConditionForOwnerTypeOperator(e,n,o),s+=this.getQueryForCondition(n,t,r,e,u);break;case"on":s+=(new dt).getQueryForCondition(o,n,r,i);break;case"on-or-before":s+=(new _t).getQueryForCondition(o,n,r,i);break;case"on-or-after":s+=(new bt).getQueryForCondition(o,n,r,i);break;case"today":s+=(new Ot).getQueryForCondition(o,n,r,i);break;case"yesterday":s+=(new jt).getQueryForCondition(o,n,r,i);break;case"tomorrow":s+=(new Ct).getQueryForCondition(o,n,r,i);break;case"last-week":s+=(new Z).getQueryForCondition(o,n,r,i);break;case"this-week":s+=(new mt).getQueryForCondition(o,n,r,i);break;case"next-week":s+=(new ut).getQueryForCondition(o,n,r,i);break;case"last-month":s+=(new H).getQueryForCondition(o,n,r,i);break;case"this-month":s+=(new yt).getQueryForCondition(o,n,r,i);break;case"next-month":s+=(new ot).getQueryForCondition(o,n,r,i);break;case"last-year":s+=(new rt).getQueryForCondition(o,n,r,i);break;case"this-year":s+=(new ft).getQueryForCondition(o,n,r,i);break;case"next-year":s+=(new ht).getQueryForCondition(o,n,r,i);break;case"last-seven-days":s+=(new K).getQueryForCondition(o,n,r,i);break;case"next-seven-days":s+=(new st).getQueryForCondition(o,n,r,i);break;case"last-x-days":s+=(new Y).getQueryForCondition(o,n,r,i);break;case"next-x-days":s+=(new at).getQueryForCondition(o,n,r,i);break;case"last-x-weeks":s+=(new et).getQueryForCondition(o,n,r,i);break;case"next-x-weeks":s+=(new ct).getQueryForCondition(o,n,r,i);break;case"last-x-months":s+=(new tt).getQueryForCondition(o,n,r,i);break;case"next-x-months":s+=(new lt).getQueryForCondition(o,n,r,i);break;case"last-x-years":s+=(new it).getQueryForCondition(o,n,r,i);break;case"next-x-years":s+=(new gt).getQueryForCondition(o,n,r,i);break;case"null":s+=Object(q.a)("[{0}].[{1}] is null ",n,o);break;case"not-null":s+=Object(q.a)("[{0}].[{1}] is not null ",n,o);break;default:u=Object(q.a)("'{0}'",this._GetOperandValue(t,r,i)),s+=this.getQueryForCondition(n,t,r,e,u)}this._get_CurrentPredicateBuilder().AppendCondition(s)}throwIfOperationOnAttributeNotSupported(t,e,i){}getQueryForCondition(t,e,i,r,n){const a={str:""};return this._AddQueryForConditionAttribute(e,i,t,a),a.str+=Object(q.a)(" {0} {1}",M(r),n),a.str}beginWritingFilter(t){this._get_CurrentPredicateBuilder().BeginWritingFilter(t)}endWritingFilter(){this._get_CurrentPredicateBuilder().EndWritingFilter()}beginWritingLinkEntity(t){const e=new Nt;this._predicateBuilders.push(e)}endWritingLinkEntity(t){this._predicateBuilders.splice(this._predicateBuilders.length-1,1)}addChildAttributes(t,e,i){}throwIfAttributeUnsupported(t){}throwIfNullOrUndefined(t,e){if(Object(C.a)(t))throw Error.create(Object(q.a)("Argument {0} cannot be null or undefined",e))}addLimitClause(t){if(!Object(C.a)(t.get_top())&&t.get_useLimitStatement()){if(t.get_top()<0)throw Error.create("Limit must be a positive integer");this.queryContainer.get_limitClause().str+=Object(q.a)(" LIMIT {0}",t.get_top())}}addOffsetClause(t){if(!Object(C.a)(t.get_offset())&&t.get_useLimitStatement()){if(t.get_offset()<0)throw Error.create("Offset must be a positive integer");t.get_offset()>0&&(this.queryContainer.get_limitClause().str+=Object(q.a)(" OFFSET {0}",t.get_offset()))}}addOrderByClause(t,e){if(Object(C.a)(t.get_entity()))throw Error.create("orderByQueryExpression has no parent EntityQueryExpression");this.queryContainer.get_orderByClause().str.length>0&&(this.queryContainer.get_orderByClause().str+="\r\n, ");let i=Object(q.a)("[{0}].[{1}]",e,this.getAttributePhysicalName(t.get_name(),t.get_entity().get_entityName()));i+=Object(q.a)(" {0}",t.get_descending()?"desc":"asc"),this.queryContainer.get_orderByClause().str+=i}generateQueryText(){const t={str:""};return this._GenerateSelectQuery(t),t.str}getAttributePhysicalName(t,e){return t}_AddQueryForConditionAttribute(t,e,i,r){if(function(t,e){const i=V(t,e);if(!Object(C.a)(i.get_attributeOf()))switch(V(i.get_attributeOf(),e).get_type()){case I.a.Boolean:case I.a.PickList:case I.a.State:case I.a.Status:return!0;default:return!1}return!1}(t,e)){const n=V(t,e),a=V(n.get_attributeOf(),e);this._AddPicklistCaseStatement(a,r,i)}else r.str+=Object(q.a)("[{0}].[{1}]",i,this.getAttributePhysicalName(t,e))}_AddPicklistCaseStatement(t,e,i){const r=t.get_optionSet();if(Object(C.a)(r)||Object(C.a)(r.get_options())||0===Object.keys(r.get_options()).length)return void(e.str+=" null ");e.str+=Object(q.a)("case [{0}].[{1}]",i,t.get_logicalName());const n=r.get_options();for(const t in n){const i={key:t,value:n[t]}.value;e.str+=Object(q.a)(" when {0} then '{1}'",i.get_value(),i.get_Label())}e.str+=" else null",e.str+=" end "}_GenerateSelectQuery(t){t.str+="select \n",this.queryContainer.get_distinctClause().str.length>0&&(t.str+=Object(q.a)("{0} ",this.queryContainer.get_distinctClause().str));const e=this._GenerateFromClause();t.str+=Object(q.a)("{0} \nfrom\n {1}",this.queryContainer.get_selectClause().str,e),this._get_CurrentPredicateBuilder().get_WhereClause().str.length>0&&(t.str+=Object(q.a)(" \nwhere\n {0} COLLATE NOCASE",this._get_CurrentPredicateBuilder().get_WhereClause().str)),this.queryContainer.get_orderByClause().str.length>0&&(t.str+=Object(q.a)(" order by\n {0}",this.queryContainer.get_orderByClause().str)),this.queryContainer.get_limitClause().str.length>0&&(t.str+=this.queryContainer.get_limitClause().str),this.queryContainer.get_offsetClause().str.length>0&&(t.str+=this.queryContainer.get_offsetClause().str)}_GenerateFromClause(){let t="";t+=Object(q.a)(this.queryContainer.get_fromClause().get_fromClauseFormat(),this.queryContainer.get_fromClause().get_entity());for(const e of this.queryContainer.get_joinClauses())t+=Object(q.a)(e.get_fromClauseFormat(),e.get_entity());return t}_GetOperandValue(t,e,i){if(Object(C.a)(t)||Object(C.a)(e))throw Error.create("Attribute name or entity name cannot be null or undefined");const r=V(t,e),n=this._IsEntityNameAttribute(r)?this._GetEntityName(i):i;return this._FormatOperandValue(n,r.get_type())}_FormatOperandValue(t,e){if(!Object(C.a)(t))switch(e){case I.a.Lookup:case I.a.Customer:case I.a.Owner:case I.a.UniqueIdentifier:const e=new p.a(t.toString());t=e.toString();break;case I.a.DateTime:t=Object(W.j)(t)}return t}_IsEntityNameAttribute(t){return!Object(C.a)(t)&&t.get_type()===I.a.EntityName}_GetEntityName(t){Object(C.a)(t)&&Error.create("Entity with null otc is not possible");const e=D.a.get_DefaultInstance().get_MetadataCache().getEntityMetadataByTypeCode(t).get_logicalName();return Object(C.a)(e)&&Error.create(Object(q.a)("Entity with otc {0} is not found in cache",t)),e}localizedOuterJoinClause(t){let e="";const i=t.get_tableAlias();if(i in this.get_muiAttributes()){const r=t.get_entityName(),n=D.a.get_DefaultInstance().get_MetadataCache().getEntityMetadata(r);for(let t=0;t<this.get_muiAttributes()[i].length;t++)e+=this.getLocalizedLabelJoinClause(this.get_muiAttributes()[i][t],i,n)}return e}getLocalizedLabelJoinClause(t,e,i){let r=t.get_joinCount(),n="LL"+r,a=this.getLocalizedLabelJoinQuery(e,i.get_primaryIdAttribute(),this.get_languageId(),n,t.get_attributeMetadata().get_logicalName());return this.get_needTwoJoinsToLocalizedLabelTable()&&(r++,n="LL"+r,a+=this.getLocalizedLabelJoinQuery(e,i.get_primaryIdAttribute(),this.get_baseLanguageId(),n,t.get_attributeMetadata().get_logicalName())),a}getLocalizedLabelJoinQuery(t,e,i,r,n){return String.format('\n left outer join {0} as "{1}" on ("{1}".[ObjectId] = "{2}".{3} and "{1}".LanguageId = {4} and "{1}".{5} like "%{6}%" )',"businessdatalocalizedlabel",r,t,e,i,"objectcolumnname",n)}_HasMultipleLabels(t,e){return!(Object(C.a)(t)||!t.get_isLocalizable()||Object(C.a)(e)||!e.get_usesBusinessDataLabelTable()||!this.get_needTwoJoinsToLocalizedLabelTable())}_GetLocalizedAttributeName(t,e,i){this.localizedLabelJoinCounter++,t in this.get_muiAttributes()||(this.get_muiAttributes()[t]=[]),this.get_muiAttributes()[t].push(new St(e,i,this.localizedLabelJoinCounter));const r=Object(q.a)('"LL{0}".Label',this.localizedLabelJoinCounter.toString());this.localizedLabelJoinCounter++;const n=Object(q.a)('"LL{0}".Label',this.localizedLabelJoinCounter.toString());return Object(q.a)(" {4} cast(coalesce({0},{1}, [{2}].[{3}]) as varchar(2000)) as [{3}] ",r,n,t,e.get_logicalName(),Object(C.b)(this.queryContainer.get_selectClause().str)?"":",")}_IsConditionWithNoValue(t){return this._IsOwnerTypeOperator(t)||Object(W.h)(t)||this._IsNullOperator(t)}_IsNullOperator(t){switch(t){case"null":case"not-null":return!0;default:return!1}}_IsOwnerTypeOperator(t){switch(t){case"eq-userid":case"ne-userid":case"eq-userteams":case"eq-useroruserteams":return!0;default:return!1}}_GenerateConditionForOwnerTypeOperator(t,e,i){const r=D.a.get_DefaultInstance().get_UserContext().get_UserId().toString();let n=String.format("(SELECT TeamId FROM TeamMembership WHERE SystemUserId = '{0}')",r);return"eq-useroruserteams"===t&&(n+=Object(q.a)(" or {0}.[{1}] = '{2}'",e,i,r)),n}}{constructor(){super(),this._attributeMapper=new Lt.a}addChildAttributes(t,e,i){this.throwIfNullOrUndefined(t,"attributeName"),this.throwIfNullOrUndefined(e,"entityName");const r=D.a.get_DefaultInstance().get_MetadataCache().getAttributeMetadata(e,t);this.throwIfNullOrUndefined(r,Object(q.a)("attributeMetadata: {0}.{1}",e,t)),this._attributeMapper.isComplexAttribute(r.get_type())&&this._AddChildAttributesInternal(t,r,e,i)}_AddChildAttributesInternal(t,e,i,r){const n=Object(Qt.a)(t,e.get_type()),a=this.getAttributePhysicalName(t,i);for(const t of n)t!==a&&(this.queryContainer.get_selectClause().str+=Object(q.a)("{0} [{1}].[{2}] as [{2}]",Object(C.b)(this.queryContainer.get_selectClause().str)?"":",",r,t))}throwIfAttributeUnsupported(t){if(!function(t){let e=!0;return Object(vt.d)(t.get_type())&&(Ft.a.get_DefaultInstance().get_offlineTypescriptInterface().isDssOfflineEnabled()||Object(C.a)(t.get_attributeOf()))||(e=!1),e}(t))throw Error.create(Object(q.a)("Attribute type {0} for attribute {1} not supported in offline",t.get_type(),t.get_logicalName()))}getAttributePhysicalName(t,e){if(Object(C.a)(t)||Object(C.a)(e))throw Error.create("Attribute name or entity name cannot be null or undefined");let i=null;return(t=Object(Tt.a)(D.a.get_DefaultInstance().get_MetadataCache(),e,t,Object(X.a)(()=>i,t=>i=t))).endsWith("]")&&t.startsWith("[")&&(t=t.substring(1,t.length-1)),t}throwIfOperationOnAttributeNotSupported(t,e,i){if(Object(C.a)(t)||Object(C.a)(e))throw Error.create("Attribute name or entity name cannot be null or undefined");const r=V(t,e);if(!Object(C.a)(r)&&r.get_type()in Bt){if(Bt[r.get_type()].indexOf(i)<0)throw Error.create(Object(q.a)("Condition Operation {0} is not supported on Attribute Type {1}",i,r.get_type()))}}getLocalizedLabelJoinQuery(t,e,i,r,n){return String.format('\n left outer join {0} as "{1}" on ("{1}".[ObjectId!id] = "{2}".{3} and "{1}".LanguageId = {4} and "{1}".{5} like "%{6}%" )',"businessdatalocalizedlabel",r,t,e,i,"objectcolumnname",n)}}var Dt=i("zjrO"),It=i("uIhY"),Mt=i("tHtE"),Pt=i("odYE"),Vt=i("EXJz"),Rt=i("sZ+8"),Ut=i("4r2D"),Xt=i("d7fm"),zt=i("l3Ef");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
const Gt={createSqlfromEntityQueryExpression:function(t){t.set_useLimitStatement(!1);const e=new U(new qt,t);try{return e.getSql()}catch(t){throw c.c.error("Error While Generating Sql "),t}},convertToOdataFormatResponse:function(t,e,i){const r=t.get_fieldNames();r&&r.length>0&&r.forEach(i=>{e&&e.get_select()&&e.get_select().get_attributeNames().length&&-1===e.get_select().get_attributeNames().indexOf(i)||t.markFieldChanged(i)});return Object(It.b)(i.getState(),t,1)},addNextPageLinkIfRequired:function(t,e,i,r,n){if(i&&!(r&&r.get_top()>0&&Gt.getPageNumber(r)*Gt.getPageSize(r,n)>=r.get_top())){let i="";if(r.get_skipToken()){i="?";const t=r.get_queryParameters();Object.keys(t).forEach(r=>{r===h.c.SkipTokenQueryOption&&(t[h.c.SkipTokenQueryOption]=e.get_offset()+1),i+=String.format("&{0}={1}",r,t[r])})}else i=r.get_requestUri()?r.get_requestUri()+String.format("&{0}={1}",h.c.SkipTokenQueryOption,e.get_offset()+1):"?"+String.format("&{0}={1}",h.c.SkipTokenQueryOption,e.get_offset()+1);t[h.c.ODataNextLinkString]={[h.d.API]:h.d.retrieveRecord,[h.d.EntityType]:e.get_entityName(),[h.d.Options]:i,[h.d.MaxPageSize]:n}}},getRelationshipFetchXml:function(t,e,i,r){let n=null;if(e){const a=["schemaName","relationshipType"],s=e[a[0]];switch(e[a[1]]){case 2:const e=Object(o.y)(r,t,s);n=String.format('<fetch mapping=\'logical\'><entity name=\'{0}\'><attribute name=\'{1}\'/><link-entity name="{2}" from="{3}" to="{4}" alias="{2}_1"><filter type="and"><condition attribute="{5}" operator="eq" uitype="{2}" /></filter></link-entity></entity></fetch>',e.ReferencedEntity,Object(o.h)(r,e.ReferencedEntity).PrimaryKeyName,e.ReferencingEntity,e.ReferencingAttribute,e.ReferencedAttribute,Object(o.h)(r,e.ReferencingEntity).PrimaryKeyName);break;case 0:const a=Object(o.C)(r,t,s),u=d.a.fromXml(String.format("<fetch mapping='logical'><entity name='{0}'><attribute name='{1}'/></entity></fetch>",a.ReferencingEntity,Object(o.h)(r,a.ReferencingEntity).PrimaryKeyName));u.applyContextFilter(s,i,r),n=u.getKeyQuery().get_FetchXml();break;case 1:const l=Object(o.v)(r,t,s);let c;c=l.Entity1LogicalName===t?l.Entity2LogicalName:l.Entity1LogicalName;const g=d.a.fromXml(String.format("<fetch mapping='logical'><entity name='{0}'><attribute name='{1}'/></entity></fetch>",c,Object(o.h)(r,c).PrimaryKeyName));g.applyContextFilter(s,i,r),n=g.getKeyQuery().get_FetchXml()}}return n},createEntityQueryExpressionFromFetchXml:function(t){if(!t||""===t)throw new Error("FetchXml string is empty or null");const e=new N(null);try{e.initializeFromFetchXml(t)}catch(t){throw c.c.error("Exception in Create Entity Query Expression From FetchXml is "+Object(a.f)(t)),new Error("Exception in Create Entity Query Expression From FetchXml")}return e},createEntityQueryExpressionFromODataUri:function(t,e,i,r){if(!e||""===e)throw new Error("entityName is null or empty");if(!i)throw new Error("oDataqueryOptions object is null or undefined");const n=new N(e);if(i.get_select()&&i.get_select().get_attributeNames().length>0){c.c.info("oDataqueryOptions has select option");const r=n.get_tableAlias();i.get_select().get_attributeNames().forEach(i=>{n.addAttribute(Object(Vt.getAttributeNameFromOData)(t,e,i),r)})}i.get_filter()&&i.get_filter().get_filterExpression()?n.set_filterExpression(i.get_filter().get_filterExpression()):c.c.info("oDataqueryOptions has no filter option"),i.get_orderBy()&&i.get_orderBy().get_orderByTermTokens().length>0&&(c.c.info("oDataqueryOptions has orderby option"),i.get_orderBy().get_orderByTermTokens().forEach(t=>{n.addOrderByAttribute(t.get_attributeName(),t.get_isDescending())}));return n.set_top(Gt.getPageSize(i,r)),n.set_offset(Gt.getPageNumber(i)),n},createQueryFromEntityQueryExpression:function(t,e,i){const r=Gt.createSqlfromEntityQueryExpression(e);c.c.info("Sql generated from EQE of entity: "+e.get_entityName()+" with sql value: "+r);const n=new Dt.a(new Q.a,i);return n.set_EntityLogicalName(e.get_entityName()),Jt(t,n,e,r),n.set_PageSize(e.get_top()),n.set_PageNumber(e.get_offset()),n},convertToRetrieveMultipleOdataFormat:function(t,e,i,r,n){const a=new Array,s=e.get_entities();let u=s.length;i&&i.get_top()>0&&t.get_top()<i.get_top()&&i.get_top()-t.get_offset()*t.get_top()<0&&(u=i.get_top()-(t.get_offset()-1)*t.get_top());for(let e=0;e<u;e++){const r=Gt.convertToOdataFormatResponse(s[e],i,n);i&&i.get_expand()&&i.get_expand().get_expandTerms().forEach(i=>{r[i.get_navigationProperty().concat(h.c.ODataNextLinkString)]={[h.d.API]:h.d.retrieveRecord,[h.d.Id]:s[e].get_identifier().get_identifier().toString(),[h.d.EntityType]:t.get_entityName(),[h.d.Options]:String.format("?$select={0}&{1}&$getOnlyRelatedEntity=true",Object(o.G)(n.getState(),t.get_entityName()),i.get_expandTermString())},r[i.get_navigationProperty()]={}}),a.push(r)}const l={[h.b.Value]:a};return Gt.addNextPageLinkIfRequired(l,t,e.get_moreRecords(),i,r),l},getRelatedEntities:function(t,e,i,r,s){const o=[];try{if(!t)throw c.c.error("Record value is null"),new n.a("Record value is null");if(!e||0===e.get_expandTerms().length)return Promise.resolve(t);e.get_expandTerms().forEach(e=>{const a=e.get_navigationProperty();if(c.c.info("Expand expression has navigation property value is "+a),!i.has(a))throw c.c.error("Navigation property is not present"),new n.a(Object(u.a)(-7022,[a,t.get_identifier().LogicalName]),-7022);const l=i.get(a);o.push(Gt.retrieveMultipleRecordsFromNavProp(l,t,e,r,s))})}catch(t){return c.c.error("getRelatedEntities fails "+Object(a.f)(t)),Promise.reject(O.a.FromMessage(t.message,null))}return Promise.all(o).then(e=>(e.forEach(e=>{const i=e,r=i.get_query().get_relationship();t.get_relatedEntities().addRelationship(r,i)}),t)).catch(t=>{throw c.c.error("getRelatedEntities fails "+Object(a.f)(t)),t})},addAttributeToEQE:function(t,e,i){if(!t)throw new Error("EntityQueryExpression is null");if(0!==t.get_attributes().length||e&&e.get_selectOption()&&0!==e.get_selectOption().get_attributeNames().length){const r=new Array;if(e&&e.get_selectOption()&&e.get_selectOption().get_attributeNames().length>0){c.c.info("Expand has attribute and length is "+e.get_selectOption().get_attributeNames().length),t.get_attributes().forEach(t=>{r.push(t.get_name())});const i=t.get_tableAlias();e.get_selectOption().get_attributeNames().forEach(e=>{-1===r.indexOf(e)&&(t.addAttribute(e,i),r.push(e))})}const n=Object(o.G)(i,t.get_entityName());c.c.info("Primaryid attribute is "+n),-1===r.indexOf(n)&&t.addAttribute(n,null)}else{c.c.info("Query expression or select token has no attributes, so adding all attributes to the query expression.");const e=Object(s.d)(i,t.get_entityName());for(const i in e){const r=e[i];Wt(r.Type)&&!r.AttributeOf&&t.addAttribute(i,null)}}},convertToRetrieveOdataFormat:function(t,e,i){let r={};if(e.get_queryParameters()&&e.get_queryParameters()[h.c.GetOnlyRelatedEntity]&&Object(g.a)(e.get_queryParameters()[h.c.GetOnlyRelatedEntity].toString())){const e=new Array;if(t&&t.get_relatedEntities()&&t.get_relatedEntities().get_entityCollections()&&t.get_relatedEntities().get_entityCollections().length>0){t.get_relatedEntities().get_entityCollections()[0].get_value().get_entities().forEach(t=>{e.push(Gt.convertToOdataFormatResponse(t,null,i))})}r[h.b.Value]=e}else r=Gt.convertToOdataFormatResponse(t,e,i);return r},getPageNumber:function(t){const e=t&&t.get_skipToken()?Object(r.b)(t.get_skipToken()):1;return c.c.info("oDataqueryOptions has pageNumber is "+e),e},getPageSize:function(t,e){let i=e&&e<5e3?e:5e3;t&&t.get_top()&&t.get_top()>0&&i>t.get_top()&&(i=t.get_top());return c.c.info("oDataqueryOptions has maxPageSize is "+e+" and pageSize is "+i),i},getEntityFromRelationShip:function(t,e,i){const r=["schemaName","relationshipType"],n=t[r[0]];switch(t[r[1]]){case 2:return Object(o.y)(e,i,n).ReferencedEntity;case 0:return Object(o.C)(e,i,n).ReferencingEntity;case 1:const t=Object(o.v)(e,i,n);return t.Entity1LogicalName===i?t.Entity2LogicalName:t.Entity1LogicalName}return null},updateLinkExpressionWithFilterValues:function(t,e,i){t.get_linkedEntities().forEach(t=>{t.get_entityName()===e&&Gt.updateConditionsWithFilterValues(t.get_filterExpression(),e,i),Gt.updateLinkExpressionWithFilterValues(t,e,i)})},updateConditionsWithFilterValues:function(t,e,i){t&&(t.get_conditions()&&t.get_conditions().forEach(t=>{t.get_entityName()===e&&(t.set_value(l.a.toString(l.a.fromLegacyGuid(i.get_identifier().Id))),t.set_operator("eq"))}),t.get_filterExpressions()&&t.get_filterExpressions().forEach(t=>{Gt.updateConditionsWithFilterValues(t,e,i)}))},retrieveMultipleRecordsFromNavProp:function(t,e,i,r,s){return r.dispatch(Object(b.f)(Gt.getEntityFromRelationShip(t,r.getState(),e.get_identifier().LogicalName),!0,[],s)).then(()=>{const a=Gt.getRelationshipFetchXml(e.get_identifier().LogicalName,t,l.a.fromLegacyGuid(e.get_identifier().Id),r.getState());if(!a)throw c.c.error("Invalid Fetch Xml for navigation property "),new n.a(Object(u.a)(-7025),-7025);const o=Gt.createEntityQueryExpressionFromFetchXml(a);Gt.updateLinkExpressionWithFilterValues(o,e.get_identifier().LogicalName,e),Gt.addAttributeToEQE(o,i,r.getState());const g=new v.a(new L.a(i.get_navigationProperty()),new k.a(o.get_entityName(),l.a.toLegacyGuid(l.a.newGuid())),""),h=Gt.createSqlfromEntityQueryExpression(o);return c.c.info("Sql generated from EQE of entity: "+o.get_entityName()+" with sql value: "+h),g.set_EntityLogicalName(o.get_entityName()),Jt(r.getState(),g,o,h),g.set_PageSize(5e3),r.dispatch(Object(_.a)(g,null,s))},t=>{throw c.c.error("Offline.XrmOfflineUtils.retrieveMultipleRecordsFromNavProp: Entity Metadata could not be retrieved with error "+Object(a.f)(t)),t}).catch(t=>{throw c.c.error("Offline.XrmOfflineUtils.retrieveMultipleRecordsFromNavProp: Multiple records could not be retrieved with error "+Object(a.f)(t)),t})},getEntityMapFromQueryExpression:function t(e){return e.get_linkedEntities().reduce((e,i)=>Object.assign(e,t(i)),{[e.get_entityName()]:null})},createSqlfromFetchXMLAsync:function(t,e,i){const r=Gt.createEntityQueryExpressionFromFetchXml(e);Gt.addAttributeToEQE(r,null,t.getState());const n=Gt.getEntityMapFromQueryExpression(r);return t.dispatch(Object(b.e)(n,i)).then(()=>Gt.createSqlfromEntityQueryExpression(r)).catch(t=>{throw c.c.error("createSqlfromFetchXMLAsync fails because all entities in fetch are not present: "+Object(a.f)(t)),t})},createSqlfromFetchXMLSync:function(t,e,i){if(Object(Rt.n)(t,i))try{const t=Gt.createEntityQueryExpressionFromFetchXml(e);return Gt.createSqlfromEntityQueryExpression(t)}catch(t){return c.c.error("createSqlfromFetchXMLSync: Error While Generating Sql from fetch"),""}return""},transformPayload:function(t,e,i,r){try{const a=Object(Vt.getAttributeTypesFromOData)(Object.keys(i),e,t);if(!a)return;const s=[];Object.keys(a).forEach(l=>{if(!(l in i))return;const c=i[l],g=a[l];if(!Object(C.a)(c))switch(g){case I.a.Integer:case I.a.BigInt:const a=parseInt(c.toString(),10);if(isNaN(a))throw new n.a(Object(u.a)(-7005,[l]),-7005);i[l]=a;break;case I.a.Decimal:case I.a.Double:case I.a.Money:break;case I.a.DateTime:i[l]=c.toISOString();break;case I.a.Boolean:{const t=Number(c.get_value());i[l]=0!==t;break}case I.a.State:case I.a.Status:case I.a.PickList:i[l]=Number(c.get_value());break;case I.a.UniqueIdentifier:i[l]=c.toString();break;case I.a.Lookup:case I.a.Customer:case I.a.Owner:!function(t,e,i,r,a){var s;const u=i[r],l=u.LogicalName,c=u.Id,g=Object(o.B)(t,e);let h=!1;for(const e in g)if((g[e].ReferencingAttribute===r||g[e].ReferencingEntityNavigationPropertyName===r)&&g[e].ReferencedEntity===l){h=!0;const n=Object(o.o)(t,l);i[g[e].ReferencingEntityNavigationPropertyName+"@odata.bind"]=`/${n}(${c})`,i[g[e].ReferencingEntityNavigationPropertyName+"@OData.Community.Display.V1.FormattedValue"]=null!==(s=u.Name)&&void 0!==s?s:"",delete i[r]}if(!h){const t=`No navigation property found for attribute '${r}' with entity type '${l}'`,e=new n.a(t,-2147015424,new Error(t));throw a.error(`${Ht()} ${t}`),e}}(t,e,i,l,r);break;case I.a.PartyList:s.push(l);case I.a.String:case I.a.Memo:case I.a.Unknown:case I.a.EntityName:break;default:throw new n.a(Object(u.a)(-7013,[l]),-7013)}}),function(t,e,i,r,n){if(0===r.length)return;const a=[];r.forEach(r=>{i[r].get_entities().forEach(i=>{const n=i.getValue(h.b.PartyId),s=Object(o.o)(t,n.LogicalName),u={};u[`${h.b.PartyId}_${n.LogicalName}@odata.bind`]=`/${s}(${n.Id.toString()})`,u[zt.T]=Object(Xt.a)(e,r),a.push(u)}),delete i[r]});const s=Object(o.b)(t,e);i[s.ReferencedEntityNavigationPropertyName]=a}(t,e,i,s)}catch(t){throw r.error(`${Ht()} Payload transformation failed with error:  ${Object(a.f)(t)}`),t}},getExpandTermsEntityAndAttributes:function(t,e,i){const r={};if(i&&i.get_expand()&&i.get_expand().get_expandTerms()){const n=Object(o.B)(t.getState(),e),a=Object(o.E)(t.getState(),e),s=Object(o.w)(t.getState(),e);i.get_expand().get_expandTerms().forEach(t=>{var e,i;const o=t.get_navigationProperty(),u=null!==(i=null===(e=t.get_selectOption())||void 0===e?void 0:e.get_attributeNames())&&void 0!==i?i:[];let l=!1,c=[];if(!Object(C.a)(n)){c=Object.keys(n);for(let t=0;t<c.length;t++){const e=n[c[t]].ReferencedEntity;if(n[c[t]].ReferencingAttribute===o){r[e]=Kt(r[e],u),l=!0;break}}}if(!l&&!Object(C.a)(a)){c=Object.keys(a);for(let t=0;t<c.length;t++){const e=a[c[t]].ReferencingEntity;if(a[c[t]].ReferencedEntityNavigationPropertyName===o){r[e]=Kt(r[e],u),l=!0;break}}}if(!l&&!Object(C.a)(s)){c=Object.keys(s);for(let t=0;t<c.length;t++){if(s[c[t]].Entity1NavigationPropertyName===o){r[s[c[t]].Entity1LogicalName]=Kt(r[s[c[t]].Entity1LogicalName],u),l=!0;break}if(s[c[t]].Entity2NavigationPropertyName===o){r[s[c[t]].Entity2LogicalName]=Kt(r[s[c[t]].Entity2LogicalName],u),l=!0;break}}}})}return r}};function Wt(t){switch(t){case I.a.Unknown:case I.a.Decimal:case I.a.Double:case I.a.Integer:case I.a.Memo:case I.a.Money:case I.a.String:case I.a.UniqueIdentifier:case I.a.BigInt:case I.a.Owner:case I.a.Customer:case I.a.Lookup:case I.a.DateTime:case I.a.PickList:case I.a.State:case I.a.Status:case I.a.Boolean:case I.a.EntityName:return!0;default:return!1}}function Jt(t,e,i,r){e.set_ColumnSet(new F.a([])),e.set_ColumnNames(function t(e){return e.get_attributes().map(t=>{const i=e.get_Alias();return i?`${i}.${t.get_name()}`:t.get_name()}).concat(e.get_linkedEntities().reduce((e,i)=>e.concat(t(i)),[]))}(i)),e.get_DescriptorSet().updateDescriptorSet(T.a.Sql,r),e.set_FetchXmlForAliasedValues(function(t,e){const i=e.get_fetchXml();if(i)return Object(Mt.d)(t,i);return null}(t,i))}function $t(t,e,i,r,n){const s=e&&e.get_fetchXml()&&e.get_fetchXml().length>0?Gt.createEntityQueryExpressionFromFetchXml(e.get_fetchXml()):Gt.createEntityQueryExpressionFromODataUri(r.getState(),t,e,i);Gt.addAttributeToEQE(s,null,r.getState());const o=Gt.getEntityMapFromQueryExpression(s);return r.dispatch(Object(b.e)(o,n)).then(()=>r.dispatch(Object(_.a)(Gt.createQueryFromEntityQueryExpression(r.getState(),s,p.a.newGuid().toString()),null,n)).then(t=>Gt.convertToRetrieveMultipleOdataFormat(s,t,e,i,r)).catch(t=>{throw c.c.error("retrieveMultipleRecordAsyncAction fails"+Object(a.f)(t)),t})).catch(t=>{throw c.c.error("retrieveEntities fails"+Object(a.f)(t)),t})}function Yt(t,e,i,r,n,u){const g=i.get_select(),h=g&&g.get_attributeNames().length>0?g.get_attributeNames().map(e=>Object(Vt.getAttributeNameFromOData)(n.getState(),t,e)):[],d=new Pt.a(t,new l.a(e)),b=new Array,_=Object(s.k)(n.getState(),t,h);if(Object.keys(_).forEach(t=>{const e=_[t];Wt(e.Type)&&!e.AttributeOf&&b.push(t)}),0!==h.length){const e=Object(o.G)(n.getState(),t);-1===b.indexOf(e)&&b.push(e)}const p=new Ut.a(l.a.newGuid().guid);return n.dispatch(function(t,e,i,r,n){return{type:"offline.retrieve.records",execute:({dispatch:s,getState:o},u)=>u.DataSource.retrieve(t,e,new y.a(m.a.NotCached,f.a.Local),i,r,n,void 0,!1).nativePromise().then(t=>(c.c.info("Able to successfully retrieve record from offline db"),t)).catch(t=>{throw c.c.error("DataSource.retrieve fails "+Object(a.f)(t)),t})}}(Pt.a.toLegacyEntityReference(d),new F.a(b),p,null,u)).then(t=>Gt.getRelatedEntities(t.clone(),i.get_expand(),r,n,u).then(t=>Gt.convertToRetrieveOdataFormat(t,i,n)).catch(t=>{throw c.c.error("getRelatedEntities fails "+Object(a.f)(t)),t})).catch(t=>{throw c.c.error("DataSource.retrieve fails "+Object(a.f)(t)),t})}function Kt(t,e){if(Object(C.a)(t))return 0===e.length?null:e;const i=[...t,...e].reduce((t,e)=>t.includes(e)?t:[...t,e],[]);return 0===i.length?null:i}function Ht(t){return`[${t||"XrmOfflineUtils"}]`}}}]),window.bundleExecutionMarkers["scripts/9.js?v=1.4.3886-master"].end=window.performance.now(),window.reportBundleExecutionTimes&&window.reportBundleExecutionTimes();