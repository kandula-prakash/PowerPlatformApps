(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{3620:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3621),o=n(3625),r=n(3626),s=n(3629),a=n(3628);t.Models=a;var c=n(3630),u=n(3640),h=n(3641),p=function(){function e(){this._allowBackgroundFetchData=new i.default,this._appActiveData=new o.default,this._config=new s.default,this._cache=new r.default(this._config),this._skypeTokenData=new u.default,this._telemetryManager=new h.default(this._cache),this._scheduler=new c.default(this._config,this._skypeTokenData,this._cache,this._appActiveData,this._allowBackgroundFetchData,this._telemetryManager),this.telemetryEventAdded=this._telemetryManager.telemetryEventAdded,this.configUpdated=this._cache.configUpdated}return e.prototype.initialize=function(e){var t=this;return this._config.initialize(e),this._skypeTokenData.putSkypeTokenData(e.initialSkypeTokenData),this._appActiveData.putAppActive(e.initialAppActiveState),this._cache.initialize().then((function(){t._scheduler.initialize()}))},e.prototype.getConfig=function(){return this._cache.getEcsConfig()},e.prototype.getConfigType=function(){var e=this._cache.getEcsConfig();if(e)return e.configType},e.prototype.requestUpdate=function(){this._scheduler.requestUpdate()},e.prototype.pause=function(){this._scheduler.pause()},e.prototype.resume=function(){this._scheduler.resume()},e.prototype.setAllowBackgroundFetch=function(e){this._allowBackgroundFetchData.putBackgroundFetchAllowed(e)},e.prototype.useSkypeToken=function(e,t){this._skypeTokenData.putSkypeTokenData({skypeToken:e,skypeTokenExpiration:t})},e.prototype.setAppActive=function(e){this._appActiveData.putAppActive(e)},e.prototype.setConfigsToFetch=function(e){var t=this;return this._config.setConfigsToFetch(e),this._cache.updateConfigsToFetch().then((function(){t._scheduler.updateConfigsToFetch()}))},e.prototype.setFetchTimeout=function(e){this._config.setFetchTimeout(e)},e}();t.default=p},3621:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3622),o=function(){function e(){this._isAllowed=!1}return e.prototype.putBackgroundFetchAllowed=function(e){if(this._isAllowed=e,this.isBackgroundFetchAllowed()&&this._isAllowedDeferral){var t=this._isAllowedDeferral;this._isAllowedDeferral=void 0,t.resolve(void 0)}},e.prototype.isBackgroundFetchAllowed=function(){return this._isAllowed},e.prototype.waitForBackgroundFetchAllowed=function(){return this.isBackgroundFetchAllowed()?i.Resolved():(this._isAllowedDeferral||(this._isAllowedDeferral=i.Defer()),this._isAllowedDeferral.promise())},e}();t.default=o},3622:function(e,t,n){"use strict";(function(e){function n(e){return null!=e&&"function"==typeof e.then}function i(e){return null!=e&&"function"==typeof e.cancel}function o(e,n){if(!t.config.catchExceptions)return e();try{return e()}catch(i){return n(i)}}Object.defineProperty(t,"__esModule",{value:!0}),t.config={exceptionsToConsole:!0,catchExceptions:!0,traceEnabled:!1,exceptionHandler:void 0,unhandledErrorHandler:function(e){throw e}},t.fromThenable=function(e){var t=h();return e.then((function(e){t.resolve(e)}),(function(e){t.reject(e)})),t.promise().thenAsync((function(e){return e}))};var r,s=[],a=void 0!==e;function c(t){s.push(t),1===s.length&&(a?e(u):setTimeout(u,0))}function u(){var e=s;s=[];for(var t=0;t<e.length;t++)e[t]()}function h(){return new r.SyncTask}function p(e){return(new r.SyncTask).resolve(e).promise()}function l(e){var t=h(),o=!1;return t.onCancel((function(t){e.forEach((function(e){i(e)&&r.SyncTask.cancelOtherInternal(e,t)}))})),e.forEach((function(e){n(e)?e.then((function(e){o||(o=!0,t.resolve(e))}),(function(e){o||(o=!0,t.reject(e))})):o||(o=!0,t.resolve(e))})),t.promise()}t.asyncCallback=c,function(e){var r=function(){function e(){this._completedSuccess=!1,this._completedFail=!1,this._traceEnabled=!1,this._cancelCallbacks=[],this._wasCanceled=!1,this._wasExplicitlyCanceled=!1,this._resolving=!1,this._storedCallbackSets=[],this._mustHandleError=!0}return e.prototype._addCallbackSet=function(t,n){var i=this,o=new e;return o.onCancel((function(e){t.wasCanceled=!0,t.cancelContext=e,i._cancelInternal(e)})),t.task=o,this._storedCallbackSets.push(t),n?this._mustHandleError=!1:o._mustHandleError=!1,this._resolving||(this._completedSuccess?this._resolveSuccesses():this._completedFail&&this._resolveFailures()),o.promise()},e.prototype.onCancel=function(e){return this._completedSuccess||this._completedFail||(this._wasCanceled?e(this._cancelContext):this._cancelCallbacks.push(e)),this},e.prototype.then=function(e,t){return this._addCallbackSet({successFunc:e,failFunc:t},!0)},e.prototype.thenAsync=function(e,t){return this._addCallbackSet({successFunc:e,failFunc:t,asyncCallback:!0},!0)},e.prototype.catch=function(e){return this._addCallbackSet({failFunc:e},!0)},e.prototype.always=function(e){return this._addCallbackSet({successFunc:e,failFunc:e},!0)},e.prototype.setTracingEnabled=function(e){return this._traceEnabled=e,this},e.prototype.finally=function(e){return this._addCallbackSet({successFunc:e,failFunc:e},!1),this},e.prototype.done=function(e){return this._addCallbackSet({successFunc:e},!1),this},e.prototype.fail=function(e){return this._addCallbackSet({failFunc:e},!1),this},e.prototype.resolve=function(e){return this._checkState(!0),this._completedSuccess=!0,this._storedResolution=e,this._cancelCallbacks=[],this._resolveSuccesses(),this},e.prototype.reject=function(t){return this._checkState(!1),this._completedFail=!0,this._storedErrResolution=t,this._cancelCallbacks=[],this._resolveFailures(),e._enforceErrorHandled(this),this},e.prototype._checkState=function(e){if(this._completedSuccess||this._completedFail){this._completeStack&&console.error(this._completeStack.message,this._completeStack.stack);var n="Failed to "+(e?"resolve":"reject")+": the task is already "+(this._completedSuccess?"resolved":"rejected");throw new Error(n)}(t.config.traceEnabled||this._traceEnabled)&&(this._completeStack=new Error("resolve"))},e._enforceErrorHandled=function(n){n._mustHandleError&&(e._rejectedTasks.push(n),e._enforceErrorHandledTimer||(e._enforceErrorHandledTimer=setTimeout((function(){e._enforceErrorHandledTimer=void 0;var n=e._rejectedTasks;e._rejectedTasks=[],n.forEach((function(e,n){e._mustHandleError&&t.config.unhandledErrorHandler(e._storedErrResolution)}))}),0)))},e.prototype.cancel=function(e){if(this._wasExplicitlyCanceled)throw new Error("Already Canceled");this._wasExplicitlyCanceled=!0,this._cancelInternal(e)},e.prototype._cancelInternal=function(e){var t=this;if(!this._wasCanceled){this._wasCanceled=!0,this._cancelContext=e;var n=this._cancelCallbacks;this._cancelCallbacks=[],n.length>0&&n.forEach((function(e){t._completedSuccess||t._completedFail||e(t._cancelContext)}))}},e.cancelOtherInternal=function(e,t){var n=e;n._storedCallbackSets&&n._cancelInternal?n._cancelInternal(t):e.cancel(t)},e.prototype.promise=function(){return this},e.prototype._resolveSuccesses=function(){var e=this;for(this._resolving=!0;this._storedCallbackSets.length;){var t=this._storedCallbackSets;this._storedCallbackSets=[],t.forEach((function(t){t.asyncCallback?c((function(){return e._resolveSuccessCallback(t)})):e._resolveSuccessCallback(t)}))}this._resolving=!1},e.prototype._resolveSuccessCallback=function(t){var r=this;t.successFunc?o((function(){var o=t.successFunc(r._storedResolution);i(o)&&(t.wasCanceled?e.cancelOtherInternal(o,t.cancelContext):t.task.onCancel((function(t){return e.cancelOtherInternal(o,t)}))),n(o)?o.then((function(e){t.task.resolve(e)}),(function(e){t.task.reject(e)})):t.task.resolve(o)}),(function(e){r._handleException(e,"SyncTask caught exception in success block: "+e.toString()),t.task.reject(e)})):t.task.resolve(this._storedResolution)},e.prototype._resolveFailures=function(){var e=this;for(this._resolving=!0;this._storedCallbackSets.length;){var t=this._storedCallbackSets;this._storedCallbackSets=[],t.forEach((function(t){t.asyncCallback?c((function(){return e._resolveFailureCallback(t)})):e._resolveFailureCallback(t)}))}this._resolving=!1},e.prototype._resolveFailureCallback=function(t){var r=this;t.failFunc?o((function(){var o=t.failFunc(r._storedErrResolution);i(o)&&(t.wasCanceled?e.cancelOtherInternal(o,t.cancelContext):t.task.onCancel((function(t){return e.cancelOtherInternal(o,t)}))),n(o)?o.then((function(e){t.task.resolve(e)}),(function(e){t.task.reject(e)})):t.task.resolve(o)}),(function(e){r._handleException(e,"SyncTask caught exception in failure block: "+e.toString()),t.task.reject(e)})):t.task.reject(this._storedErrResolution)},e.prototype._handleException=function(e,n){t.config.exceptionsToConsole&&console.error(n),t.config.exceptionHandler&&t.config.exceptionHandler(e)},e.prototype.toEs6Promise=function(){var e=this;return new Promise((function(t,n){return e.then(t,n)}))},e._rejectedTasks=[],e}();e.SyncTask=r}(r||(r={})),t.all=function(e){if(0===e.length)return p([]);var t,o=h(),s=e.length,a=Array(e.length);o.onCancel((function(t){e.forEach((function(e){i(e)&&r.SyncTask.cancelOtherInternal(e,t)}))}));var c=function(){0==--s&&(void 0!==t?o.reject(t):o.resolve(a))};return e.forEach((function(e,i){n(e)?e.then((function(e){a[i]=e,c()}),(function(e){void 0===t&&(t=void 0===e||e),c()})):(a[i]=e,c())})),o.promise()},t.Defer=h,t.Resolved=p,t.Rejected=function(e){return(new r.SyncTask).reject(e).promise()},t.race=l,t.raceTimer=function(e,t){var n=h(),i=setTimeout((function(){n.resolve({timedOut:!0})}),t);return l([e.then((function(e){return clearTimeout(i),{timedOut:!1,result:e}})),n.promise()])}}).call(this,n(3623).setImmediate)},3625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3622),o=function(){function e(){this._isActive=!1}return e.prototype.putAppActive=function(e){if(this._isActive=e,this.isAppActive()&&this._appActiveDeferral){var t=this._appActiveDeferral;this._appActiveDeferral=void 0,t.resolve(void 0)}},e.prototype.isAppActive=function(){return this._isActive},e.prototype.waitForAppActive=function(){return this.isAppActive()?i.Resolved():(this._appActiveDeferral||(this._appActiveDeferral=i.Defer()),this._appActiveDeferral.promise())},e}();t.default=o},3626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3627),o=n(3622),r=n(3628),s=function(){function e(e){this._config=e,this.configUpdated=new i.default,this._cachedConfigs={}}return e.prototype.initialize=function(){return this.updateConfigsToFetch()},e.prototype.updateConfigsToFetch=function(){var e=this,t=this._config.getConfig(),n=t.databaseInterface,i=t.configsToFetch;if(!n)return o.Resolved();for(var r=[],s=function(t){if(a._cachedConfigs[t])return"continue";r.push(n.getData(t).then((function(n){n&&(e._cachedConfigs[t]=n)})).catch((function(){return o.Resolved()})))},a=this,c=0,u=i;c<u.length;c++){s(u[c])}return o.all(r).then((function(){r.length>0&&e.configUpdated.fire()}))},e.prototype.getEcsConfig=function(){return this._cachedConfigs[r.EcsConfigType.User]||this._cachedConfigs[r.EcsConfigType.Default]},e.prototype.getEcsConfigByType=function(e){return this._cachedConfigs[e]},e.prototype.putConfig=function(e){var t=this.getEcsConfig();this._cachedConfigs[e.configType]=e;var n=this.getEcsConfig();(n&&n.configType===e.configType||t&&n&&t.configType!==n.configType)&&this.configUpdated.fire();var i=this._config.getConfig().databaseInterface;return i?i.putData(e.configType,e):o.Resolved()},e}();t.default=s},3627:function(e,t,n){"use strict";n.r(t),n.d(t,"SubscriptionToken",(function(){return i}));var i=function(){function e(e,t){this._event=e,this._callback=t}return e.prototype.unsubscribe=function(){this._event.unsubscribe(this._callback)},e}(),o=function(){function e(e){void 0===e&&(e=!1);var t=this;this._allowStopPropagation=e,this.fire=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var i=t._subscribers,o=i.length-1;o>=0;o--){var r=i[o].apply(null,e);if(t._allowStopPropagation&&r)return!0}return!1},this._subscribers=[]}return e.prototype.dispose=function(){this._subscribers=[]},e.prototype.subscribe=function(e){return this._subscribers=this._subscribers.concat(e),new i(this,e)},e.prototype.unsubscribe=function(e){this._subscribers=this._subscribers.filter((function(t){return t!==e}))},e}();t.default=o},3628:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Default=0]="Default",e[e.User=1]="User"}(t.EcsConfigType||(t.EcsConfigType={}))},3629:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.prototype.initialize=function(e){if(this._config)throw"ECS Configuration already initialized";this._config=e},e.prototype.getConfig=function(){if(!this._config)throw"ECS Configuration not yet initialized";return this._config},e.prototype.setConfigsToFetch=function(e){if(!this._config)throw"ECS Configuration not yet initialized";this._config=i({},this._config,{configsToFetch:e})},e.prototype.setFetchTimeout=function(e){if(!this._config)throw"ECS Configuration not yet initialized";this._config=i({},this._config,{fetchTimeout:e})},e}();t.default=o},3630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3628),o=n(3631),r=function(){function e(e,t,n,r,s,a){var c=this;this._config=e,this._skypeTokenData=t,this._cache=n,this._isFetchingSettings={},this._pendingFetch={},this._paused=!1,this._fetchEcsSettingsIfNeeded=function(e){var t=c._config.getConfig(),n=c._cache.getEcsConfigByType(e);if(-1!==t.configsToFetch.indexOf(e)&&!c._isFetchingSettings[e])if(n||!c._pendingFetch[e]){var o=n?n.expiration-Date.now():-1;o<=0||n&&e===i.EcsConfigType.User&&c._skypeTokenData.isSkypeTokenValid()&&n.lastFetchTokenHash!==c._skypeTokenData.getSkypeTokenHash(c._skypeTokenData.getSkypeToken())?c._fetchSkypeEcsSettings(e):setTimeout((function(){return c._fetchEcsSettingsIfNeeded(e)}),o)}else c._fetchSkypeEcsSettings(e)},this._fetchSkypeEcsSettings=function(e,t){(void 0===t&&(t=!1),c._isFetchingSettings[e]||c._paused&&!t)?c._pendingFetch[e]=!0:(c._pendingFetch[e]=!1,c._isFetchingSettings[e]=!0,c._config.getConfig().getEcsParameters().catch((function(){return console.warn("ECS - Failed to fetch ECS fetching parameters"),{}})).then((function(t){return c._ecsClient.getConfig(c._cache.getEcsConfig(),e===i.EcsConfigType.User,t)})).then((function(t){console.log("ECS - Config fetch complete"),c._isFetchingSettings[e]=!1,c._cache.putConfig(t),c._fetchEcsSettingsIfNeeded(e)})))},this._ecsClient=new o.default(this._config,this._skypeTokenData,r,s,a)}return e.prototype.initialize=function(){var e=this;this.updateConfigsToFetch(),this._skypeTokenData.skypeTokenChanged.subscribe((function(){return e._fetchEcsSettingsIfNeeded(i.EcsConfigType.User)}))},e.prototype.updateConfigsToFetch=function(){for(var e=this._config.getConfig(),t=0,n=e.configsToFetch;t<n.length;t++){(r=n[t])in this._isFetchingSettings||(this._isFetchingSettings[r]=!1),r in this._isFetchingSettings||(this._pendingFetch[r]=!1)}for(var i=0,o=e.configsToFetch;i<o.length;i++){var r=o[i],s=this._cache.getEcsConfigByType(r);!s||s.appVersion&&s.appVersion!==e.clientVersion?this._fetchSkypeEcsSettings(r,!0):this._fetchEcsSettingsIfNeeded(r)}},e.prototype.requestUpdate=function(){for(var e=0,t=this._config.getConfig().configsToFetch;e<t.length;e++){var n=t[e];this._fetchSkypeEcsSettings(n)}},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1;for(var e=0,t=this._config.getConfig().configsToFetch;e<t.length;e++){var n=t[e];this._fetchEcsSettingsIfNeeded(n)}},e}();t.default=r},3631:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a,c=n(3632),u=n(3622),h=n(3628),p=n(3638),l=function(e){function t(t,n,i,o,r,s,a,c){var u=e.call(this,t)||this;u._config=n,u._skypeTokenData=i,u._appActiveData=o,u._allowBackgroundFetchData=r,u._etag=s,u._getUserConfig=a;var h=u._config.getConfig();if(u._apiPath=h.clientTeam?"/config/v1/"+h.clientName+"/"+h.clientVersion+"/"+h.clientTeam:"/config/v1/"+h.clientName+"/"+h.clientVersion,c){var p=Object.keys(c).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(c[e].toString())}));p&&(u._apiPath+="?"+p.join("&"))}return u}return o(t,e),t.prototype._blockRequestUntil=function(e){var t=this;if(this._getUserConfig&&!this._skypeTokenData.isSkypeTokenValid()&&console.log("ECS - Delaying User config fetch until we have a valid SkypeToken"),!this._appActiveData.isAppActive()&&!this._allowBackgroundFetchData.isBackgroundFetchAllowed()){var n=this._getUserConfig?"User config":"config";console.log("ECS - Delaying "+n+" fetch until the app is active (or background fetch is allowed)")}return u.race([this._appActiveData.waitForAppActive(),this._allowBackgroundFetchData.waitForBackgroundFetchAllowed()]).then((function(){if(t._getUserConfig)return t._skypeTokenData.waitForValidSkypeToken()})).then((function(){a=Date.now()}))},t.prototype._getHeaders=function(){var e={};return this._etag&&(e["If-None-Match"]=this._etag),this._getUserConfig&&(e.Authorization=this._skypeTokenData.getSkypeToken()),e},t.prototype.getConfig=function(){var t=this._config.getConfig().fetchTimeout;return void 0!==t&&(t<0?t=0:t>0&&t<3e4&&(t=3e4)),e.prototype.performApiGetDetailed.call(this,this._apiPath,{timeout:t})},t}(c.GenericRestClient),f=function(){function e(e,t,n,i,o){this._config=e,this._skypeTokenData=t,this._appActiveData=n,this._allowBackgroundFetchData=i,this._telemetryManager=o,this._ecsFailureBackoffTimer=new c.ExponentialTime(1e3,3e5),this._cacheMaxAgeRegex=/.*max-age=(\d+).*/gi,this._serverIndex=NaN}return e.prototype.getConfig=function(e,t,n){var i=this,o=this._config.getConfig().hosts;if((isNaN(this._serverIndex)||this._serverIndex>o.length-1)&&(this._serverIndex=Math.floor(Math.random()*o.length)),!o||!o.length)return u.Rejected(new Error("no configuration service endpoint"));var s=u.Defer(),c=0,f=function(){var _=e&&e.eTag?e.eTag:void 0,d=new l(o[i._serverIndex],i._config,i._skypeTokenData,i._appActiveData,i._allowBackgroundFetchData,_,t,n);c++,d.getConfig().then((function(n){var l=n.headers.etag,f=n.headers.expires;n.body&&n.body.Headers&&(l||(l=n.body.Headers.ETag),f||(f=n.body.Headers.Expires));var d=i._calculateResponseTimeInfo(e);if(!l||!f)return console.warn("ECS - Service returned an empty ETag or Expiration header: "+JSON.stringify(n)),u.Rejected({timedOut:!1,responseParsingException:new Error("ECS Service returned empty ETag or Expiration header"),responseCode:n.statusCode});var g,y=new Date(i._calculateExpirationDate(n.headers)).getTime();if(304===n.statusCode&&e)(g=r({},e)).configType=t?h.EcsConfigType.User:h.EcsConfigType.Default,g.eTag=l,g.expiration=y,g.cacheUpdateTime=d.lastResponseTime,g.lastFetchTokenHash=i._skypeTokenData.getSkypeTokenHash(n.requestHeaders.Authorization);else{if("object"!=typeof n.body)return console.warn("ECS - Service returned invalid response "+JSON.stringify(n)),u.Rejected({timedOut:!1,responseParsingException:new Error("ECS Service returned invalid response body"),responseCode:n.statusCode});g={config:n.body,configType:t?h.EcsConfigType.User:h.EcsConfigType.Default,eTag:l,expiration:y,cacheUpdateTime:a,lastFetchTokenHash:i._skypeTokenData.getSkypeTokenHash(n.requestHeaders.Authorization),appVersion:i._config.getConfig().clientVersion}}i._telemetryManager.sendTelemetryEvent(new p.EcsConfigFetchResponse(d.fetchDelayMs,n.statusCode,c,i._skypeTokenData.isSkypeTokenValid(),o[i._serverIndex],d.fetchDurationValid,!!_,JSON.stringify(n).length,d.cacheAge,!(e&&e.expiration-Date.now()>0),a,d.lastResponseTime,t,l)),i._ecsFailureBackoffTimer.reset(),s.resolve(g)})).catch((function(n){var r={timedOut:n&&n.timedOut||!1,responseParseError:n&&n.responseParsingException,responseCode:n&&n.statusCode||0,message:i._getErrorMessage(n)};console.error("ECS - Service request failed to return a response (timedOut: "+r.timedOut+", responseParseError: "+r.responseParseError+")");var s=i._calculateResponseTimeInfo(e);i._telemetryManager.sendTelemetryEvent(new p.EcsConfigFetchResponse(s.fetchDelayMs,r.responseCode,c,i._skypeTokenData.isSkypeTokenValid(),o[i._serverIndex],s.fetchDurationValid,!!_,0,s.cacheAge,!(e&&e.expiration-Date.now()>0),a,s.lastResponseTime,t,void 0,r.timedOut,r.responseParseError,r.message)),setTimeout((function(){f()}),i._ecsFailureBackoffTimer.getTimeAndCalculateNext())}))};return f(),s.promise()},e.prototype._calculateExpirationDate=function(e){var t=Date.now()+1728e5;if(e.date&&e.expires){var n=new Date(e.date).getTime(),i=Date.now()-n,o=new Date(e.expires).getTime();return isNaN(o)?t:Math.min(t,o+i)}var r=this._cacheMaxAgeRegex.exec(e["cache-control"]);return this._cacheMaxAgeRegex.lastIndex=0,r&&2===r.length?Math.min(t,Date.now()+1e3*Number(r[1])):Date.now()+18e5},e.prototype._calculateResponseTimeInfo=function(e){var t=(s=Date.now())-a;return{lastResponseTime:s,fetchDelayMs:t,fetchDurationValid:!(t<0||t>31536e6),cacheAge:e?s-e.cacheUpdateTime:0}},e.prototype._getErrorMessage=function(e){if(e)return"string"==typeof e?e:"object"==typeof e&&(e.statusText||e.message)?e.statusText||e.message:void 0},e}();t.default=f},3632:function(e,t,n){e.exports=n(3633)},3633:function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(3634)),i(n(3636)),i(n(3637))},3634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3635);t.DEFAULT_TIME_GROW_FACTOR=2.718281828459045,t.DEFAULT_TIME_JITTER=.11962656472;var o=function(){function e(e,n,o,r){void 0===o&&(o=t.DEFAULT_TIME_GROW_FACTOR),void 0===r&&(r=t.DEFAULT_TIME_JITTER),this._initialTime=e,this._maxTime=n,this._growFactor=o,this._jitterFactor=r,i.assert(this._initialTime>0,"Initial delay must be positive"),i.assert(this._maxTime>0,"Delay upper bound must be positive"),i.assert(this._growFactor>=0,"Ratio must be non-negative"),i.assert(this._jitterFactor>=0,"Jitter factor must be non-negative"),this.reset()}return e.prototype.reset=function(){this._incrementCount=0,this._currentTime=Math.round(this._initialTime*(1+Math.random()*this._jitterFactor))},e.prototype.getTime=function(){return this._currentTime},e.prototype.getIncrementCount=function(){return this._incrementCount},e.prototype.calculateNext=function(){var e=this._currentTime*this._growFactor;return e>this._maxTime&&(e=this._maxTime),this._jitterFactor<1e-5?this._currentTime=e:this._currentTime=Math.round(Math.random()*e*this._jitterFactor+e),this._currentTime<this._initialTime&&(this._currentTime=this._initialTime),this._currentTime>this._maxTime&&(this._currentTime=this._maxTime),this._incrementCount++,this._currentTime},e.prototype.getTimeAndCalculateNext=function(){var e=this.getTime();return this.calculateNext(),e},e}();t.ExponentialTime=o},3635:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.assert=function(e,t){if(!e)throw new Error(t)},t.isObject=function(e){return null!==e&&"object"==typeof e},t.isString=function(e){return"string"==typeof e},t.attempt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];try{return e.apply(void 0,t)}catch(i){return new Error(i)}},t.remove=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},t.clone=function(e){return Array.isArray(e)?e.map(t.clone):t.isObject(e)?Object.keys(e).reduce((function(n,o){var r;return i(i({},n),((r={})[o]=t.clone(e[o]),r))}),{}):e}},3636:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(3635),r=n(3637),s=function(){function e(e){this._defaultOptions={excludeEndpointUrl:!1,withCredentials:!1,retries:0},this._endpointUrl=e}return e.prototype._performApiCall=function(e,t,n,s){var a=this;void 0===s&&(s={});var c=i(i({},this._defaultOptions),s);n&&(c.sendData=n),c.eTag&&(c.augmentHeaders||(c.augmentHeaders={}),c.augmentHeaders["If-None-Match"]=c.eTag),c.contentType||(c.contentType=o.isString(c.sendData)?"form":"json");var u=c.excludeEndpointUrl?e:this._endpointUrl+e;return new r.SimpleWebRequest(t,u,c,(function(){return a._getHeaders(c)}),(function(){return a._blockRequestUntil(c)})).start().then((function(e){return a._processSuccessResponse(e),e}))},e.prototype._getHeaders=function(e){return{}},e.prototype._blockRequestUntil=function(e){},e.prototype._processSuccessResponse=function(e){},e.prototype.performApiGet=function(e,t){return this.performApiGetDetailed(e,t).then((function(e){return e.body}))},e.prototype.performApiGetDetailed=function(e,t){return this._performApiCall(e,"GET",void 0,t)},e.prototype.performApiPost=function(e,t,n){return this.performApiPostDetailed(e,t,n).then((function(e){return e.body}))},e.prototype.performApiPostDetailed=function(e,t,n){return this._performApiCall(e,"POST",t,n)},e.prototype.performApiPatch=function(e,t,n){return this.performApiPatchDetailed(e,t,n).then((function(e){return e.body}))},e.prototype.performApiPatchDetailed=function(e,t,n){return this._performApiCall(e,"PATCH",t,n)},e.prototype.performApiPut=function(e,t,n){return this.performApiPutDetailed(e,t,n).then((function(e){return e.body}))},e.prototype.performApiPutDetailed=function(e,t,n){return this._performApiCall(e,"PUT",t,n)},e.prototype.performApiDelete=function(e,t,n){return this.performApiDeleteDetailed(e,t,n).then((function(e){return e.body}))},e.prototype.performApiDeleteDetailed=function(e,t,n){return this._performApiCall(e,"DELETE",t,n)},e}();t.GenericRestClient=s},3637:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var s,a,c=n(3622),u=n(3635),h=n(3634);function p(e){return!!e&&0===e.indexOf("application/json")}function l(e,t){return t.canceled||!t.statusCode||t.statusCode>=400&&t.statusCode<600?a.DoNotRetry:a.RetryCountedWithBackoff}!function(e){e[e.DontCare=0]="DontCare",e[e.Low=1]="Low",e[e.Normal=2]="Normal",e[e.High=3]="High",e[e.Critical=4]="Critical"}(s=t.WebRequestPriority||(t.WebRequestPriority={})),function(e){e[e.DoNotRetry=0]="DoNotRetry",e[e.RetryUncountedImmediately=1]="RetryUncountedImmediately",e[e.RetryUncountedWithBackoff=2]="RetryUncountedWithBackoff",e[e.RetryCountedWithBackoff=3]="RetryCountedWithBackoff",e[e.PauseUntilResumed=4]="PauseUntilResumed"}(a=t.ErrorHandlingType||(t.ErrorHandlingType={})),t.DefaultOptions={priority:s.Normal},t.SimpleWebRequestOptions={MaxSimultaneousRequests:5,HungRequestCleanupIntervalMs:1e4,setTimeout:function(e,t){return setTimeout(e,t)},clearTimeout:function(e){return clearTimeout(e)}},t.DefaultErrorHandler=l;var f,_=[],d=[],g=[],y=0,m=0,v=function(){function e(e,n,i,o,s){this._action=e,this._url=n,this.options=i,this._getHeaders=o,this._blockRequestUntil=s,this._aborted=!1,this._timedOut=!1,this._paused=!1,this._created=Date.now(),this._finishHandled=!1,this._retryExponentialTime=new h.ExponentialTime(1e3,3e5),this._options=r(r({},t.DefaultOptions),i)}return e.prototype.getPriority=function(){return this._options.priority||s.DontCare},e.checkQueueProcessing=function(){for(var e=function(){var e=_.shift();d.push(e),(e._blockRequestUntil&&e._blockRequestUntil()||c.Resolved()).finally((function(){u.remove(d,e)})).then((function(){g.length<t.SimpleWebRequestOptions.MaxSimultaneousRequests&&!e._aborted?(g.push(e),T._scheduleHungRequestCleanupIfNeeded(),e._fire()):e._enqueue()}),(function(t){e._respond("_blockRequestUntil rejected: "+t)}))};_.length>0&&g.length<t.SimpleWebRequestOptions.MaxSimultaneousRequests;)e()},e._scheduleHungRequestCleanupIfNeeded=function(){g.length>0&&void 0===f?f=t.SimpleWebRequestOptions.setTimeout(this._hungRequestCleanupTimerCallback,t.SimpleWebRequestOptions.HungRequestCleanupIntervalMs):0===g.length&&f&&(t.SimpleWebRequestOptions.clearTimeout(f),f=void 0)},e.prototype._removeFromQueue=function(){u.remove(g,this),u.remove(_,this)},e.prototype._assertAndClean=function(e,t){e||(this._removeFromQueue(),console.error(t),u.assert(e,t))},e.prototype._fire=function(){var n=this;this._xhr=new XMLHttpRequest,this._xhrRequestHeaders={};var i=u.attempt((function(){n._xhr.open(n._action,n._url,!0)}));if(i)this._respond(i.toString());else{if(this._options.timeout){var o=m;3!==o&&(this._assertAndClean(!this._requestTimeoutTimer,"Double-fired requestTimeoutTimer"),this._requestTimeoutTimer=t.SimpleWebRequestOptions.setTimeout((function(){n._requestTimeoutTimer=void 0,n._timedOut=!0,n.abort()}),this._options.timeout)),(3===o||o<=1)&&(this._xhr.timeout=this._options.timeout,this._xhr.ontimeout=function(){m=3,3===o&&(n._timedOut=!0,n._aborted=!0,n._respond("TimedOut"))})}var r=y;3!==r?(0===r&&(y=1),this._xhr.onreadystatechange=function(){n._xhr&&(3!==n._xhr.readyState||!n._options.streamingDownloadProgress||n._aborted?4===n._xhr.readyState&&(0===r&&1===y&&t.SimpleWebRequestOptions.setTimeout((function(){3!==y&&(y=2)}),1e4),n._respond()):n._options.streamingDownloadProgress(n._xhr.responseText))}):this._options.streamingDownloadProgress&&(this._xhr.onreadystatechange=function(){n._xhr&&3===n._xhr.readyState&&n._options.streamingDownloadProgress&&!n._aborted&&n._options.streamingDownloadProgress(n._xhr.responseText)}),2!==r&&(this._xhr.onload=function(){y=3,3===r&&n._respond()},this._xhr.onerror=function(){y=3,3===r&&n._respond()}),this._xhr.onabort=function(){n._aborted=!0,n._respond("Aborted")},this._xhr.upload&&this._options.onProgress&&(this._xhr.upload.onprogress=this._options.onProgress);var s=this._options.acceptType||"json",a=this._options.customResponseType||e._getResponseType(s),c=u.attempt((function(){n._xhr.responseType=a}));if(c&&"json"!==a)throw c;T._setRequestHeader(this._xhr,this._xhrRequestHeaders,"Accept",e.mapContentType(s)),this._xhr.withCredentials=!!this._options.withCredentials;var h=this.getRequestHeaders(),p={};if(Object.keys(h).forEach((function(e){var t=h[e],i=e.toLowerCase();"content-type"!==i?"accept"!==i?(n._assertAndClean(!p[i],"Setting duplicate header key: "+p[i]+" and "+e),null!=t?(p[i]=!0,T._setRequestHeader(n._xhr,n._xhrRequestHeaders,e,t)):console.warn('Tried to set header "'+e+'" on request with "'+t+'" value, header will be dropped')):n._assertAndClean(!1,"Don't set Accept with options.headers -- use it with the options.acceptType property"):n._assertAndClean(!1,"Don't set Content-Type with options.headers -- use it with the options.contentType property")})),this._options.sendData){var l=e.mapContentType(this._options.contentType||"json");T._setRequestHeader(this._xhr,this._xhrRequestHeaders,"Content-Type",l);var f=e.mapBody(this._options.sendData,l);this._xhr.send(f)}else this._xhr.send()}},e._setRequestHeader=function(e,t,n,i){e.setRequestHeader(n,i),t[n]=i},e.mapContentType=function(e){return"json"===e?"application/json":"form"===e?"application/x-www-form-urlencoded":e},e.mapBody=function(e,t){if(p(t)){if(!u.isString(e))return JSON.stringify(e)}else if((r=t)&&0===r.indexOf("application/x-www-form-urlencoded")){if(!u.isString(e)&&u.isObject(e)){var n=e;return Object.keys(n).map((function(e){return encodeURIComponent(e)+(n[e]?"="+encodeURIComponent(n[e].toString()):"")})).join("&")}}else if(function(e){return!!e&&0===e.indexOf("multipart/form-data")}(t)){if(u.isObject(e)){var i=new FormData,o=e;return Object.keys(o).forEach((function(e){return i.append(e,o[e])})),i}u.assert(!1,"contentType multipart/form-data must include an object as sendData")}var r;return e},e.prototype.setUrl=function(e){this._url=e},e.prototype.setHeader=function(e,t){this._options.augmentHeaders||(this._options.augmentHeaders={}),t?this._options.augmentHeaders[e]=t:delete this._options.augmentHeaders[e]},e.prototype.getRequestHeaders=function(){var e={};return!this._getHeaders||this._options.overrideGetHeaders||this._options.headers||(e=r(r({},e),this._getHeaders())),this._options.overrideGetHeaders&&(e=r(r({},e),this._options.overrideGetHeaders)),this._options.headers&&(e=r(r({},e),this._options.headers)),this._options.augmentHeaders&&(e=r(r({},e),this._options.augmentHeaders)),e},e.prototype.getOptions=function(){return u.clone(this._options)},e.prototype.setPriority=function(e){this._options.priority!==e&&(this._options.priority=e,this._paused||this._xhr||(u.remove(_,this),this._enqueue()))},e.prototype.resumeRetrying=function(){this._paused?(this._paused=!1,this._enqueue()):u.assert(!1,"resumeRetrying() called but not paused!")},e.prototype._enqueue=function(){var t=this;if(!this._aborted&&!(g.indexOf(this)>=0||d.indexOf(this)>=0||_.indexOf(this)>=0)){var n=_.findIndex((function(e){return e.getPriority()===t.getPriority()&&e._created>t._created||e.getPriority()<t.getPriority()}));n>-1?_.splice(n,0,this):_.push(this),e.checkQueueProcessing()}},e._getResponseType=function(e){return"blob"===e?"arraybuffer":"text/xml"===e||"application/xml"===e?"document":"text/plain"===e?"text":"json"},e._hungRequestCleanupTimerCallback=function(){f=void 0,g.filter((function(e){return!(!e._xhr||4!==e._xhr.readyState)&&(console.warn("SimpleWebRequests found a completed XHR that hasn't invoked it's callback functions, manually responding"),!0)})).forEach((function(e){e._respond()})),T._scheduleHungRequestCleanupIfNeeded()},e}();t.SimpleWebRequestBase=v;var T=function(e){function n(t,n,i,o,r){return e.call(this,t,n,i,o,r)||this}return o(n,e),n.prototype.abort=function(){this._aborted?u.assert(!1,"Already aborted "+this._action+" request to "+this._url):(this._aborted=!0,this._retryTimer&&(t.SimpleWebRequestOptions.clearTimeout(this._retryTimer),this._retryTimer=void 0),this._requestTimeoutTimer&&(t.SimpleWebRequestOptions.clearTimeout(this._requestTimeoutTimer),this._requestTimeoutTimer=void 0),this._deferred?(this._respond("Aborted"),this._xhr&&this._xhr.abort()):u.assert(!1,"Haven't even fired start() yet -- can't abort"))},n.prototype.start=function(){var e=this;return this._deferred?(u.assert(!1,"WebRequest already started"),c.Rejected("WebRequest already started")):(this._deferred=c.Defer(),this._deferred.onCancel((function(){e.abort()})),this._enqueue(),this._deferred.promise())},n.prototype._respond=function(e){var n=this;if(!this._finishHandled){this._finishHandled=!0,this._removeFromQueue(),this._retryTimer&&(t.SimpleWebRequestOptions.clearTimeout(this._retryTimer),this._retryTimer=void 0),this._requestTimeoutTimer&&(t.SimpleWebRequestOptions.clearTimeout(this._requestTimeoutTimer),this._requestTimeoutTimer=void 0);var i,o=0;if(this._xhr)try{o=this._xhr.status,i=this._xhr.statusText||e}catch(g){}else i=e||"Browser Error - Possible CORS or Connectivity Issue";var r,s,c={};if(this._xhr){if((this._xhr.getAllResponseHeaders()||"").split(/\r?\n/).forEach((function(e){if(0!==e.length){var t=e.indexOf(":");-1===t?c[e]="":c[e.substr(0,t).toLowerCase()]=e.substr(t+1).trim()}})),!c["content-type"]){var h=this._xhr.getResponseHeader("content-type");h&&(c["content-type"]=h)}if(r=this._xhr.response,c["content-type"]&&p(c["content-type"])&&(!r||!u.isObject(r))&&("text"===this._xhr.responseType||""===this._xhr.responseType)&&this._xhr.responseText)try{r=JSON.parse(this._xhr.responseText)}catch(y){s=y,console.warn("Failed to parse XHR JSON response")}}if(this._xhr&&4===this._xhr.readyState&&(o>=200&&o<300||304===o)){var f={url:this._xhr.responseURL||this._url,method:this._action,requestOptions:this._options,requestHeaders:this._xhrRequestHeaders||{},statusCode:o,statusText:i,headers:c,body:r,responseParsingException:s};this._deferred.resolve(f)}else{var _={url:(this._xhr?this._xhr.responseURL:void 0)||this._url,method:this._action,requestOptions:this._options,requestHeaders:this._xhrRequestHeaders||{},statusCode:o,statusText:i,headers:c,body:r,canceled:this._aborted,timedOut:this._timedOut,responseParsingException:s};this._options.augmentErrorResponse&&this._options.augmentErrorResponse(_);var d=this._options.customErrorHandler?this._options.customErrorHandler(this,_):l(0,_);d!==a.DoNotRetry&&(this._options.retries&&this._options.retries>0||d===a.PauseUntilResumed||d===a.RetryUncountedImmediately||d===a.RetryUncountedWithBackoff)?(d===a.RetryCountedWithBackoff&&this._options.retries--,this._requestTimeoutTimer&&(t.SimpleWebRequestOptions.clearTimeout(this._requestTimeoutTimer),this._requestTimeoutTimer=void 0),this._aborted=!1,this._timedOut=!1,this._finishHandled=!1,this._xhr&&(this._xhr.onabort=null,this._xhr.onerror=null,this._xhr.onload=null,this._xhr.onprogress=null,this._xhr.onreadystatechange=null,this._xhr.ontimeout=null,this._xhr=void 0,this._xhrRequestHeaders=void 0),d===a.PauseUntilResumed?this._paused=!0:d===a.RetryUncountedImmediately?this._enqueue():this._retryTimer=t.SimpleWebRequestOptions.setTimeout((function(){n._retryTimer=void 0,n._enqueue()}),this._retryExponentialTime.getTimeAndCalculateNext())):this._deferred.reject(_)}v.checkQueueProcessing()}},n}(v);t.SimpleWebRequest=T},3638:function(e,t,n){"use strict";var i,o=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){function t(t,n,i,o,r,s,a,c,u,h,p,l,f,_,d,g,y){var m=e.call(this)||this;return m._responseTime=t,m._responseCode=n,m._fetchAttempts=i,m._hasValidToken=o,m._serverEndpoint=r,m._fetchDurationValid=s,m._cacheAvailable=a,m._responseSize=c,m._configAge=u,m._configExpired=h,m._fetchStart=p,m._fetchEnd=l,m._isUserConfig=f,m._etag=_,m._timedOut=d,m._responseParsingException=g,m._errorMessage=y,m}return o(t,e),t.prototype.getEventName=function(){return"ecs_tsclient_fetch_config"},t.prototype.getAttributes=function(){var t=e.prototype.getAttributes.call(this);return t.fetch_delay_ms=this._responseTime,t.fetch_response_code=this._responseCode,t.fetch_attempts=this._fetchAttempts,t.authenticated_user=this._hasValidToken,t.url=this._serverEndpoint,t.fetch_duration_valid=this._fetchDurationValid,t.cache_available=this._cacheAvailable,t.response_size=this._responseSize,t.config_age=this._configAge,t.config_expired=this._configExpired,t.fetch_start=this._fetchStart,t.fetch_end=this._fetchEnd,t.is_user_config=this._isUserConfig,this._etag&&(t.fetched_etag=this._etag),void 0!==this._timedOut&&(t.fetch_timed_out=this._timedOut),this._responseParsingException&&(t.fetch_response_parsing_error=this._responseParsingException.message),this._errorMessage&&(t.fetch_error_message=this._errorMessage),t},t}(n(3639).TelemetryEventBase);t.EcsConfigFetchResponse=r},3639:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.prototype.getAttributes=function(){return{Source:"ecs_client"}},e}();t.TelemetryEventBase=i},3640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3627),o=n(3622),r=function(){function e(){this.skypeTokenChanged=new i.default}return e.prototype.putSkypeTokenData=function(e){if(this._data=e,this.isSkypeTokenValid()&&this.skypeTokenChanged.fire(),this.isSkypeTokenValid()&&this._validSkypeTokenDeferral){var t=this._validSkypeTokenDeferral;this._validSkypeTokenDeferral=void 0,t.resolve(void 0)}},e.prototype.isSkypeTokenValid=function(){var e=this._data;return!!e&&!!e.skypeToken&&e.skypeTokenExpiration>Date.now()},e.prototype.getSkypeToken=function(){var e=this._data;if(!e||!e.skypeToken)throw"No Skype Token provided";return e.skypeToken},e.prototype.getSkypeTokenHash=function(e){return void 0===e?0:e.split("").reduce((function(e,t){return(101*e+t.charCodeAt(0))%999727999}),e.length)},e.prototype.waitForValidSkypeToken=function(){return this.isSkypeTokenValid()?o.Resolved():(this._validSkypeTokenDeferral||(this._validSkypeTokenDeferral=o.Defer()),this._validSkypeTokenDeferral.promise())},e}();t.default=r},3641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3627),o=function(){function e(e){this._cache=e,this.telemetryEventAdded=new i.default}return e.prototype.sendTelemetryEvent=function(t){var n=t.getEventName(),i=t.getAttributes(),o=!1,r=this._cache.getEcsConfig();if(r){if(e._containsEcsClientTelemetryConfig(r.config)){var s=r.config.ECSCONFIG;s&&s.ecsClientTelemetry&&(o=!!s.ecsClientTelemetry[n])}}else console.warn("No previously cached ECS telemetry config exists - fallback to sending event"),o=!0;o&&this.telemetryEventAdded.fire(n,i)},e._containsEcsClientTelemetryConfig=function(e){return!!e&&!!e.ECSCONFIG&&!!e.ECSCONFIG.ecsClientTelemetry},e}();t.default=o}}]);