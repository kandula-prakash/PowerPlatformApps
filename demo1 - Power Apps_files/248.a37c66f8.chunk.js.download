(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{7509:function(e,n,t){"use strict";t.r(n);var o=t(6866);t.d(n,"connectionsActions",(function(){return o}));var c=t(7510);t.d(n,"connectionsMiddlewares",(function(){return c}));var r=t(7515),i=t(7514);t.d(n,"connectionsSelectors",(function(){return i})),n.default=r.reducer},7510:function(e,n,t){"use strict";t.r(n);var o=t(7511);t.d(n,"ConnectionClientRootSaga",(function(){return o.ConnectionClientRootSaga}));var c=t(7512);t.d(n,"ConnectionActionsMiddleware",(function(){return c.ConnectionActionsMiddleware}));var r=t(7513);t.d(n,"ConnectionClientSaga",(function(){return r.default}))},7511:function(e,n,t){"use strict";t.r(n),t.d(n,"ConnectionClientRootSaga",(function(){return r}));var o=t(5749),c=t(7509);function*r(){yield Object(o.all)([Object(o.fork)(c.connectionsMiddlewares.ConnectionClientSaga)])}},7512:function(e,n,t){"use strict";t.r(n),t.d(n,"ConnectionActionsMiddleware",(function(){return i}));var o=t(2871),c=t(5623),r=t(6866);function i(e){return n=>t=>i=>{var a,{dispatch:s}=n,d=i;switch(d.type){case r.ConnectionsActionTypes.OPEN_CONNECTION_PIVOT:a=d.payload.connection;var u=d.payload.selectedPivot;d.payload.navigate(Object(c.getConnectionSubroute)(a.id,u),!0);break;case r.ConnectionsActionTypes.CONSENT_CONNECTION:a=d.payload.connection;var l=d.payload.useFirstPartyConsent;e.consentConnection(a,l).then(()=>{s(Object(r.fetchConnectionsRequest)({forceRefresh:!0}))});break;case r.ConnectionsActionTypes.CREATE_CONNECTION:var C=d.payload.apiName,p=d.payload.isParentReactModalExperience,y=d.payload.refreshParentModal;e.createConnection(C,p).then(()=>{s(Object(r.fetchConnectionsRequest)({forceRefresh:!0})),p&&y&&y()});break;case r.ConnectionsActionTypes.EDIT_CONNECTION:a=d.payload.connection,e.editConnection(a).then(()=>{s(Object(r.fetchConnectionsRequest)({forceRefresh:!0}))});break;case r.ConnectionsActionTypes.DELETE_CONNECTION:a=d.payload.connection;var O=i.payload.redirectUrl,E=d.payload.navigate;e.deleteConnection(a).then(()=>{s(Object(r.deleteConnectionFulfilled)({connection:a,redirectUrl:O,navigate:E}))});break;case r.ConnectionsActionTypes.DELETE_CONNECTION_FULFILLED:i.payload.redirectUrl&&d.payload.navigate(i.payload.redirectUrl,!0);break;case r.ConnectionsActionTypes.SHARE_CONNECTION:a=d.payload.connection,o.featureGates.showReactConnectionDrillInPages?e.shareConnection(a.id):d.payload.navigate(Object(c.getConnectionSubroute)(a.id,"share"),!0)}return t(i)}}},7513:function(e,n,t){"use strict";t.r(n);var o=t(5749),c=t(5606),r=t(5604),i=t(5760),a=t(5597),s=t(5470),d=t(5483),u=t(6866),l=t(7514),C=t(5768),p=t(5804);function*y(e){var n=c.SagaContextProps.getCurrentEnvironment(),t=yield Object(o.select)(l.connectionListCachedStatusSelector,n.id),s=e&&e.payload&&e.payload.inlcudeFlowConnections?r.getFilterValueByEnvironment(n):Object(p.addLogicFlowsPowerFlowsFilter)(r.getFilterValueByEnvironment(n)),y=c.SagaContextProps.getAadUser(),O={url:Object(d.getQueryUrl)(a.connectionsQueryUrl,s,y.objectId)},E=yield Object(o.call)(i.default,e,O,t);if(!E)return null;Object(C.hasResponseError)(E)?yield Object(o.put)(Object(u.fetchConnectionsRejected)({error:Object(C.getResponseErrorMessage)(E)})):yield Object(o.put)(Object(u.fetchConnectionsFulfilled)({connections:E.data.value,environmentId:n.id}))}function*O(e){var n=e.payload.connectionId,t=yield Object(o.select)(l.connectionSelector,n),a=s.CachedStatusType.None;t&&(a=s.CachedStatusType.Done);var p=c.SagaContextProps.getCurrentEnvironment(),y=r.getFilterValueByEnvironment(p),O=c.SagaContextProps.getAadUser(),E={url:Object(d.getQueryUrl)(n,y,O.objectId)},f=yield Object(o.call)(i.default,e,E,a);if(!f)return null;Object(C.hasResponseError)(f)?yield Object(o.put)(Object(u.fetchConnectionRejected)({connectionId:n,error:Object(C.getResponseErrorMessage)(f)})):yield Object(o.put)(Object(u.fetchConnectionFulfilled)({connection:f.data}))}function*E(e){var n=e.payload.connectionId,t=yield Object(o.select)(l.connectionUsages,n),a=s.CachedStatusType.None;t&&(a=s.CachedStatusType.Done);var p={url:function(e,n,t){var o=r.getFilterValueByEnvironment(n),c="".concat(e,"/usages");return Object(d.getQueryUrl)(c,o,t.objectId)+"&$expand=Resource"}(n,c.SagaContextProps.getCurrentEnvironment(),c.SagaContextProps.getAadUser())},y=yield Object(o.call)(i.default,e,p,a);if(!y)return null;Object(C.hasResponseError)(y)?yield Object(o.put)(Object(u.fetchConnectionUsagesRejected)({connectionId:n,error:Object(C.getResponseErrorMessage)(y)})):yield Object(o.put)(Object(u.fetchConnectionUsagesFulfilled)({connectionId:n,usages:y.data.value}))}function*f(e){var n=e.payload.gatewayId,t=e.payload.connectionId,a=yield Object(o.select)(l.connectionGateway,t),p=s.CachedStatusType.None;a&&(p=s.CachedStatusType.Done);var y=c.SagaContextProps.getCurrentEnvironment(),O=r.getFilterValueByEnvironment(y),E=c.SagaContextProps.getAadUser(),f={url:Object(d.getQueryUrl)(n,O,E&&E.objectId)},g=yield Object(o.call)(i.default,e,f,p);if(!g)return null;Object(C.hasResponseError)(g)?yield Object(o.put)(Object(u.fetchConnectionGatewayRejected)({connectionId:t,gatewayId:n,error:Object(C.getResponseErrorMessage)(g)})):yield Object(o.put)(Object(u.fetchConnectionGatewayFulfilled)({gateway:g.data,connectionId:t}))}n.default=function*(){yield Object(o.takeLatest)(u.ConnectionsActionTypes.FETCH_CONNECTIONS_REQUEST,y),yield Object(o.takeLatest)(u.ConnectionsActionTypes.FETCH_CONNECTION_REQUEST,O),yield Object(o.takeLatest)(u.ConnectionsActionTypes.FETCH_CONNECTION_USAGES_REQUEST,E),yield Object(o.takeLatest)(u.ConnectionsActionTypes.FETCH_CONNECTION_GATEWAY_REQUEST,f)}},7514:function(e,n,t){"use strict";t.r(n),t.d(n,"connectionsListError",(function(){return a})),t.d(n,"connectionUsagesError",(function(){return s})),t.d(n,"isConnectionUsagesCachedComplete",(function(){return d})),t.d(n,"connectionUsages",(function(){return u})),t.d(n,"connectionGatewayError",(function(){return l})),t.d(n,"connectionGateway",(function(){return C})),t.d(n,"connectionListCachedStatusSelector",(function(){return p})),t.d(n,"isConnectionListCachedComplete",(function(){return y})),t.d(n,"isConnectionAndApiListCachedComplete",(function(){return O})),t.d(n,"connectionsSelector",(function(){return E})),t.d(n,"connectionsListUiSelectorWithErrorOnTop",(function(){return f})),t.d(n,"connectionSelector",(function(){return g})),t.d(n,"connectionErrors",(function(){return b}));var o=t(5470),c=t(5804),r=t(5807),i=t(5626),a=e=>e.connections.fetchConnectionsError,s=e=>e.connections.fetchConnectionUsagesError||"",d=(e,n)=>e.connections.connectionUsages.has(n),u=(e,n)=>e.connections.connectionUsages.get(n),l=e=>e.connections.fetchConnectionGatewayError||"",C=(e,n)=>e.connections.connectionGateway.get(n),p=(e,n)=>{var t=Object(i.listFetchedSelector)(e);return t&&t[n]&&t[n].connections||o.CachedStatusType.None},y=(e,n)=>p(e,n)===o.CachedStatusType.Done,O=(e,n)=>p(e,n)===o.CachedStatusType.Done&&Object(r.apisListCachedStatusSelector)(e,n)===o.CachedStatusType.Done,E=(e,n)=>{var t=(e=>e.connections.connections)(e);return Object(o.denormalize)(t,n).filter(c.uiConnectionFilter)},f=(e,n)=>E(e,n).filter(c.flowConnectionFilter).sort(e=>Object(c.isConnectionInError)(e)?-1:1),g=(e,n)=>e.connections.connections.byId(n),b=(e,n)=>e.connections.fetchConnectionErrors[n]||""},7515:function(e,n,t){"use strict";t.r(n),t.d(n,"defaultState",(function(){return C})),t.d(n,"reducer",(function(){return y}));var o=t(5804),c=t(5470),r=t(6866),i=t(2867),a=t(2889),s=t(2812);function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var C={connections:new c.CaseInsensitiveNormalized,fetchConnectionsError:"",fetchConnectionErrors:{},fetchConnectionUsagesIsLoading:!1,fetchConnectionUsagesError:"",connectionUsages:Object(i.Map)(),fetchConnectionGatewayError:"",connectionGateway:Object(i.Map)()};function p(e){var n={apps:[],connections:[]};if(e&&e.length)for(var t=0,c=e.length;t<c;t++){var r=e[t],i=o.getUsageType(r);if(i===a.ResourceType.App){var s=r.properties.resource;s&&n.apps.push(s)}else if(i===a.ResourceType.Flow){var d=r.properties.resource;d&&n.connections.push(d)}}return n}function y(){var e,n,t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,i=arguments.length>1?arguments[1]:void 0;switch(i.type){case r.ConnectionsActionTypes.FETCH_CONNECTIONS_FULFILLED:return t=Object(c.updateNormalizedData)(o.connections,i.payload.connections),u(u({},o),{},{connections:t,fetchConnectionsError:""});case r.ConnectionsActionTypes.FETCH_CONNECTIONS_REJECTED:return u(u({},o),{},{fetchConnectionsError:i.payload.error});case r.ConnectionsActionTypes.DELETE_CONNECTION_FULFILLED:var a=Object(s.assign)(new c.CaseInsensitiveNormalized,o.connections);return Object(c.removeResourceById)(a,i.payload.connection.id),u(u({},o),{},{connections:a});case r.ConnectionsActionTypes.FETCH_CONNECTION_REQUEST:return o;case r.ConnectionsActionTypes.FETCH_CONNECTION_FULFILLED:return e=Object(s.assign)(new c.CaseInsensitiveNormalized,o.connections),Object(c.add)(e,i.payload.connection),delete(n=Object(s.assign)({},o.fetchConnectionErrors))[i.payload.connection.id],u(u({},o),{},{connections:e,fetchConnectionErrors:n});case r.ConnectionsActionTypes.FETCH_CONNECTION_REJECTED:return(n=Object(s.assign)({},o.fetchConnectionErrors))[i.payload.connectionId]=i.payload.error,u(u({},o),{},{fetchConnectionErrors:n});case r.ConnectionsActionTypes.FETCH_CONNECTION_USAGES_REQUEST:return Object(s.assign)({},o,{fetchConnectionUsagesIsLoading:!1});case r.ConnectionsActionTypes.FETCH_CONNECTION_USAGES_FULFILLED:return Object(s.assign)({},o,{connectionUsages:o.connectionUsages.set(i.payload.connectionId,p(i.payload.usages)),fetchConnectionUsagesError:"",fetchConnectionUsagesIsLoading:!1});case r.ConnectionsActionTypes.FETCH_CONNECTION_USAGES_REJECTED:return Object(s.assign)({},o,{fetchConnectionUsagesError:i.payload.error,fetchConnectionUsagesIsLoading:!1});case r.ConnectionsActionTypes.FETCH_CONNECTION_GATEWAY_FULFILLED:return Object(s.assign)({},o,{connectionGateway:o.connectionGateway.set(i.payload.connectionId,i.payload.gateway),fetchConnectionGatewayError:""});case r.ConnectionsActionTypes.FETCH_CONNECTION_GATEWAY_REJECTED:return Object(s.assign)({},o,{fetchConnectionGatewayError:i.payload.error});default:return o}}}}]);
//# sourceMappingURL=https://sourcemaps.powerapps.com/srcmaps/static/js/module/248.a37c66f8.chunk.js.map