(window.bundleExecutionMarkers=window.bundleExecutionMarkers||{})["scripts/ODataQueryOptions.js?v=1.4.3886-master"]={begin:performance.now()},(window.__wpJsonpUci=window.__wpJsonpUci||[]).push([[34],{bcN9:function(t,e,r){"use strict";r.r(e),r.d(e,"ODataQueryOptions",(function(){return q}));var i=r("504W");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */var s,n=r("84PK"),o=r("yQs0"),a=r("I1N9"),h=r("YIt1");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
class c{constructor(t){this.dataType=null,this.value=null,this.value=t,this.dataType=Object.getType(t)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */!function(t){t[t.openBracket=0]="openBracket",t[t.closeBracket=1]="closeBracket",t[t.logicalOperator=2]="logicalOperator",t[t.operand=3]="operand"}(s||(s={}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
class l{constructor(t){this.type=0,this.value=null,this.type=this._GetTokenType(t),this.value=t.toLowerCase()}_GetTokenType(t){switch(t.toLowerCase()){case"(":return 0;case")":return s.closeBracket;case"and":case"or":case"not":return s.logicalOperator;default:return s.operand}}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class u{constructor(){this._parseFilterRegex="'.*?'|[^()\\s]+|[()]",this._operatorStack=[],this._operandStack=[]}parse(t){const e=new RegExp(this._parseFilterRegex,"g"),r=t.match(e);for(let t=0;t<r.length;t++){const e=r[t],i=new l(e);switch(i.type){case 0:this._operatorStack.push(new c(i));break;case s.closeBracket:this._EvaluateStack(!0);break;case s.logicalOperator:this._CheckPrecendenceWithLastOperator(i.value)&&this._EvaluateStack(!1),this._operatorStack.push(new c(i));break;case s.operand:if(!(t+2<r.length))throw Error.create(String.format("FilterParser: Improper Input string , exception raised after '{0}'",i.value));this._ExtractOperand(t,e,r),t+=2}}if(this._EvaluateStack(!0),1!==this._operandStack.length)throw Error.create("FilterParser: Error while evaluating expression : Input Expression seems to have improper construct");const i=this._operandStack.pop(),o=new a.a(0,n.a.newGuid().toString());return this._AddToFilterExpression(o,i.value),o}_EvaluateStack(t){for(;this._operatorStack.length>0;){const e=this._operatorStack.pop();if(!(e.value instanceof l))throw Error.create("FilterParser:EvaluateExpression Error While Evaluating Stack");{const r=e.value;if(!r.type){t||this._operatorStack.push(new c(e.value));break}if(r.type===s.logicalOperator){const t=this._GetLogicalOperator(r.value);let e=null;e=t===h.a.Not?this._CreateFilterExpressionWithOperands(t,1):this._CreateFilterExpressionWithOperands(t,2),this._operandStack.push(new c(e))}}}}_ExtractOperand(t,e,r){const i=r[t+1],s=this._TrimSingleQuotes(r[t+2]),n=new o.a(e,this._GetConditionalOperator(i),s);this._operandStack.push(new c(n))}_CreateFilterExpressionWithOperands(t,e){if(this._operandStack.length<e)throw Error.create("FilterParser:EvaluateExpression Error While Evaluating Stack :  Input Expression seems to have improper construct");const r=new a.a(t,n.a.newGuid().toString());for(let t=0;t<e;t++){const t=this._operandStack.pop();this._AddToFilterExpression(r,t.value)}return r}_AddToFilterExpression(t,e){e instanceof a.a?t.addFilterExpression(e):e instanceof o.a&&t.addCondition(e.get_attributeName(),e.get_operator(),e.get_value())}_TrimSingleQuotes(t){return t.startsWith("'")&&t.endsWith("'")&&(t=(t=t.substring(1,t.length)).substring(0,t.length-1)),t}_CheckPrecendenceWithLastOperator(t){let e=!1;if(!this._operatorStack.length)return e;const r=this._Peek(this._operatorStack);if(r.value instanceof l){const i=r.value;if(i.type){if(i.type===s.logicalOperator){const r=this._GetLogicalOperatorPriority(i.value.toLowerCase());this._GetLogicalOperatorPriority(t.toLowerCase())>r&&(e=!0)}}else e=!1}return e}_GetLogicalOperatorPriority(t){switch(t.toLowerCase()){case"not":return 1;case"and":return 2;case"or":return 3;default:throw Error.create(String.format("An invalid logical operator {0} passed as input parameter.",t))}}_GetConditionalOperator(t){switch(t.toLowerCase()){case"eq":return"eq";case"ne":return"ne";case"gt":return"gt";case"lt":return"lt";case"ge":return"ge";case"le":return"le";default:throw Error.create(String.format("FilterParser: An invalid  conditional operator {0} passed as input parameter.",t))}}_GetLogicalOperator(t){switch(t.toLowerCase()){case"not":return h.a.Not;case"and":return 0;case"or":return h.a.Or;default:throw Error.create(String.format("An invalid logical operator {0} passed as input parameter.",t))}}_Peek(t){const e=t.pop();return t.push(e),e}}class p{constructor(t,e){this._filterExpression=null,this._filterExpression=e}get_filterExpression(){return this._filterExpression}}class _{constructor(t){this._expandTerms=null,this._expandTerms=t}get_expandTerms(){return this._expandTerms}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class d{constructor(){this.text=null,this.position=0,this.kind=0}GetText(){return this.text}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */var g;!function(t){t[t.unknown=0]="unknown",t[t.end=1]="end",t[t.equal=2]="equal",t[t.openParenthesis=3]="openParenthesis",t[t.closeParenthesis=4]="closeParenthesis",t[t.comma=5]="comma",t[t.question=6]="question",t[t.identifier=7]="identifier"}(g||(g={}));
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
class x{constructor(t){this.text=null,this.textLength=0,this.currentchar=null,this.textPosition=0,this._token=null,this._alphaNumericRegex=new RegExp("[a-zA-Z1-9]","g"),this._whiteSpaceRegex=new RegExp("\\s+","g"),this.text=t,this.textLength=t.length,this._SetCurrentCharAndTextPosition(0),this._token=new d}_SetCurrentCharAndTextPosition(t){this.textPosition=t,this.currentchar=this.textPosition<this.textLength?this.text.charAt(this.textPosition):"\0"}nextToken(){return this._NextTokenImplementation()}_NextTokenImplementation(){this._SkipWhiteSpace();const t=this.textPosition;return this._token.kind=this._GetExpressionTokenKind(),this._token.text=this.text.substr(t,this.textPosition-t),this._token.position=t,this._token}get_isValidWhiteSpace(){const t=this.currentchar.toString().match(this._whiteSpaceRegex);return"\0"!==this.currentchar&&!Object(i.a)(t)&&t.length>0}get_position(){return this._token.position}get_token(){return this._token}get_isValidCharForIdentifier(){return"\0"!==this.currentchar&&(this._IsAlphaNumeric(this.currentchar)||"_"===this.currentchar||"$"===this.currentchar)}_IsAlphaNumeric(t){const e=t.toString().match(this._alphaNumericRegex);return!Object(i.a)(e)&&1===e.length}_SkipWhiteSpace(){for(;this.get_isValidWhiteSpace();)this.nextChar()}_GetExpressionTokenKind(){let t=0;switch(this.currentchar){case"(":this.nextChar(),t=g.openParenthesis;break;case")":this.nextChar(),t=g.closeParenthesis;break;case",":this.nextChar(),t=g.comma;break;default:if(this.get_isValidWhiteSpace()){this._SkipWhiteSpace(),t=0;break}if(this.get_isValidCharForIdentifier()){this._ParseIdentifier(),t=g.identifier;break}if(this.textPosition===this.textLength){t=g.end;break}throw Error.create("Unknown CharacterType Received")}return t}nextChar(){this.textPosition<this.textLength&&this.textPosition++,this.currentchar=this.textPosition===this.textLength?"\0":this.text.charAt(this.textPosition)}_ParseIdentifier(){do{this.nextChar()}while(this.get_isValidCharForIdentifier())}advanceThroughBalancedParentheticalExpression(){const t=this.get_position();this._AdvanceThroughBalancedExpression("(",")");return this.text.substr(t,this.textPosition-t)}_AdvanceThroughBalancedExpression(t,e){let r=1;for(;r>0;)this.currentchar===t?r++:this.currentchar===e&&r--,this.nextChar()}}class k{constructor(t){this._lexer=null,this._lexer=t}parseTerm(){const t=this._lexer.get_token().GetText();return this._lexer.nextToken(),t}}class m{constructor(t,e){this._navigationProperty=null,this._selectOption=null,this._navigationProperty=t,this._selectOption=e}get_navigationProperty(){return this._navigationProperty}get_selectOption(){return this._selectOption}get_expandTermString(){return this._GetExpandTermString()}_GetExpandTermString(){const t=Object(i.a)(this._selectOption)?null:this._selectOption.get_attributeNames();let e=String.format("$expand={0}",this._navigationProperty);return Object(i.a)(t)||(e+=String.format("($select={0})",t.join(","))),e}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class f{constructor(t,e){this._propertyName=null,this._optionsText=null,this._whiteSpacesRegex=new RegExp("\\s+","g"),this._propertyName=t,this._optionsText=e}_TrimBraces(t){const e=t.startsWith("("),r=t.endsWith(")");return e&&(t=t.substring(1,t.length)),r&&(t=t.substring(0,t.length-1)),t.trim()}buildExpandTermToken(){Object(i.a)(this._optionsText)||(this._optionsText=this._optionsText.replace(this._whiteSpacesRegex,""),this._optionsText=this._TrimBraces(this._optionsText),this._optionsText=this._optionsText.startsWith("?")?this._optionsText:"?"+this._optionsText);const t=O(this._optionsText);let e=null;for(const r in t){const i={key:r,value:t[r]};if("$select"!==i.key)throw Error.create(String.format("Query option {0} is not supported within $expand",i.key));e=b(t.$select.toString())}return new m(this._propertyName,e)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class T{constructor(t){this._lexer=null,this._lexer=new x(t)}parse(){return this._ParseCommaSepratedExpandList()}_ParseCommaSepratedExpandList(){const t=[];if(this._lexer.nextToken(),this._lexer.get_token().kind===g.end)throw Error.create("Invalid Expand Expression passed");for(t.push(this._ParseSingleExpandTerm());this._lexer.get_token().kind===g.comma&&(this._lexer.nextToken(),this._lexer.get_token().kind!==g.end);)t.push(this._ParseSingleExpandTerm());if(this._lexer.get_token().kind!==g.end)throw Error.create("Improper Expand string provided");return new _(t)}_ParseSingleExpandTerm(){const t=new k(this._lexer).parseTerm();this._ThrowIfValueNullorUndefined(t,"Relationship Name");let e=null;this._lexer.get_token().kind===g.openParenthesis&&(e=this._lexer.advanceThroughBalancedParentheticalExpression(),this._lexer.nextToken());return new f(t,e).buildExpandTermToken()}_ThrowIfValueNullorUndefined(t,e){if(Object(i.a)(t))throw Error.create(String.format("property {0} with value {1} is undefined",e,t))}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class w{constructor(t,e){this._attributeName=null,this._direction=null,this._ThrowIfDirectionNotValid(e),this._attributeName=t,this._direction=Object(i.a)(e)?"asc":e}_ThrowIfDirectionNotValid(t){if(!Object(i.a)(t)&&"asc"!==t&&"desc"!==t)throw Error.create(String.format(" Invalid OrderBy Construct passed {0}",String.format("{0} {1}",this._attributeName,t)))}get_attributeName(){return this._attributeName}get_isDescending(){return!Object(i.a)(this._direction)&&"desc"===this._direction}}class S{constructor(t){this._orderbyTermTokens=null,this._orderbyTermTokens=t}get_orderByTermTokens(){return this._orderbyTermTokens}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class E{constructor(t){this._orderByString=null,this._orderByString=t}parse(){let t=null;if(!Object(i.a)(this._orderByString)){const e=this._orderByString.split(",").map(t=>this._GetOrderByTermTokenInternal(t));t=new S(e)}return t}_GetOrderByTermTokenInternal(t){if(Object(i.b)(t))throw Error.create("Received Empty Orderby String");let e=null,r=null,s=0;const n=(t=t.trim()).indexOf(" ",s);if(-1!==n){if(e=t.substr(s,n-s),n!==this._orderByString.length){for(s=n;" "===t.charAt(s);)s++;r=t.substr(s,this._orderByString.length-s)}}else e=t;return new w(e,r)}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class y{constructor(t){this._attributeNames=null,this._attributeNames=t}get_attributeNames(){return this._attributeNames}}
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */class P{constructor(t){this._selectString=null,this._whiteSpaceRegex=new RegExp("\\s+","g"),this._selectString=Object(i.a)(t)?null:t.replace(this._whiteSpaceRegex,"")}parseSelect(){let t=null;if(!Object(i.a)(this._selectString)){const e=this._selectString.split(",");t=new y(e)}return t}}function b(t){return new P(t).parseSelect()}function O(t){const e={};if(!t||!t.length)return e;let r,i,s=1;for(;s<t.length;){if(r=t.indexOf("&",s),-1===r&&(r=t.length),i=t.indexOf("=",s),i>r&&(i=-1),-1!==i&&i<r){const n=t.substr(s,i-s),o=t.substr(i+1,r-i-1);v(e,n),e[n]=o}s=r+1}return e}function v(t,e){if(!Object(i.a)(e)&&e in t)throw Error.create(String.format("Multiple occurrence of {0} option found in uri input.",e))}class q{constructor(t){this._queryParameters=null,this._expandToken=null,this._filterToken=null,this._selectToken=null,this._orderByToken=null,this._fetchXml=null,this._skipToken=null,this._requestUri=null,this._top=-1,this._requestUri=t}get_expand(){if(this._ParsingRequired("$expand",this._expandToken)){const t=this.get_queryParameters().$expand.toString();this._expandToken=new T(t).parse()}return this._expandToken}get_filter(){if(this._ParsingRequired("$filter",this._filterToken)){const t=this.get_queryParameters().$filter.toString();this._filterToken=function(t){const e=(new u).parse(t);return new p(t,e)}(t)}return this._filterToken}get_select(){if(this._ParsingRequired("$select",this._selectToken)){const t=this.get_queryParameters().$select.toString();this._selectToken=b(t)}return this._selectToken}get_requestUri(){return this._requestUri}get_queryParameters(){return(Object(i.a)(this.get_requestUri())||this.get_requestUri().length>0&&Object(i.a)(this._queryParameters))&&(this._queryParameters=O(this.get_requestUri())),this._queryParameters}get_orderBy(){if(this._ParsingRequired("$orderby",this._orderByToken)){const t=this.get_queryParameters().$orderby.toString();this._orderByToken=function(t){return new E(t).parse()}(t)}return this._orderByToken}get_top(){if(-1===this._top&&"$top"in this.get_queryParameters()){const t=this.get_queryParameters().$top.toString();this._top=Number.parseLocale(t)}return this._top}get_skipToken(){return this._ParsingRequired("$skiptoken",this._skipToken)&&(this._skipToken=this.get_queryParameters().$skiptoken.toString()),this._skipToken}get_fetchXml(){return this._ParsingRequired("fetchXml",this._fetchXml)&&(this._fetchXml=this.get_queryParameters().fetchXml.toString()),this._fetchXml}_ParsingRequired(t,e){return Object(i.a)(e)&&t in this.get_queryParameters()}}}}]),window.bundleExecutionMarkers["scripts/ODataQueryOptions.js?v=1.4.3886-master"].end=window.performance.now(),window.reportBundleExecutionTimes&&window.reportBundleExecutionTimes();