(window.bundleExecutionMarkers=window.bundleExecutionMarkers||{})["scripts/retrieveToursActions.js?v=1.4.3886-master"]={begin:performance.now()},(window.__wpJsonpUci=window.__wpJsonpUci||[]).push([[56],{"0boP":function(t,e,n){"use strict";n.r(e),n.d(e,"retrieveToursAsync",(function(){return $})),n.d(e,"getActiveTourAsync",(function(){return D})),n.d(e,"getToursAsync",(function(){return _}));var o=n("Nb1E"),i=n("E5IU"),r=n("9fGf"),c=n("Z6+u"),s=n("Znsu"),a=n("aKhm"),u=n("5LEP");var l=n("i1f0"),d=n("TYIz"),p=n("pF61"),b=n("arV0"),y=n("dHD5");var g=n("99zj"),m=n("nrNG"),h=n("ruPX"),f=n("cfbi"),v=n("fILV"),O=n("Nk+G"),j=n("OKVy"),A=n("D+Bz"),w=n("n3bs"),N=n("SAYH"),T=n("oT5e"),x=n("+cdD");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
const S=(t,e)=>{if(!t||e>10)return{};const n=t=>"#text"!==t.nodeName&&"[[prototype]]"!==t.nodeName,o={};return t.forEach(t=>{t.hasChildNodes()&&t.childNodes.length>1&&n(t)?o[t.nodeName]=S(t.childNodes,e+1):n(t)&&(o[t.nodeName]=JSON.parse(t.textContent))}),o},E=(t,e,n)=>{var o,i,r;try{const c=null==n?void 0:n.msdyn_tourdefinition,a=(new DOMParser).parseFromString(c,"text/xml"),l=null==a?void 0:a.getRootNode(),d=l.firstChild.nodeName===u.b.Mobile?u.b.Mobile:u.b.Web,p=null===(o=l)||void 0===o?void 0:o.querySelectorAll(s.w),y=null===(i=l)||void 0===i?void 0:i.querySelectorAll("SubcomponentProps");let g={};try{y.length>0&&(g=S(y.item(0).childNodes,0))}catch(t){}if(!p||0===p.length)return null;const E=t=>e=>{var n;const o=null===(n=t.getElementsByTagName(e))||void 0===n?void 0:n.item(0);return o?P(o.innerHTML):""},I=[],z=[];p.forEach(n=>{const o=E(n),i=n.getElementsByTagName("Actions"),{initializerActions:r,tourStepActions:c}=M(e,t,i.length>0?P(i.item(0).outerHTML):"");r&&z.push(...r);const s=o("tourStepContext");s&&c.entryActions.unshift(()=>{return t((e=s,{type:"tours.tourstepnavigation.sync",execute({dispatch:t,getState:n}){const o=Object(T.f)(n()),i=null==o?void 0:o.pageId,r=Object(x.b)(n(),i),c=Object(b.j)(n(),i),s=(null==c?void 0:c.pageType)===w.a.ENTITY_RECORD?c.id:void 0,a=e.trim().split("/"),u=null==a?void 0:a.length;if(u<=3&&r===a[u-1]||s&&N.a.toString(s)===a[u-1]||o.navigating)return;const l={source:A.b.Unknown};switch(a[0]){case w.a.ENTITY_RECORD:const e={entityTypeName:a[1],formId:N.a.tryParseOrNull(a[2]),id:a[3]?N.a.tryParseOrNull(a[3]):N.a.EMPTY};return t(Object(h.a)(f.b,e,void 0,l));case w.a.ENTITY_LIST:const n={entityTypeName:a[1],viewId:N.a.tryParseOrNull(a[u-1])};return t(Object(h.a)(v.a,n,void 0,l));case w.a.DASHBOARD:const o={dashboardId:N.a.tryParseOrNull(a[u-1])};return t(Object(h.a)(j.a,o,void 0,l));case w.a.CONTROL:const i={customControlId:a[u-1]};return t(Object(h.a)(O.a,i,void 0,l))}}})).then(()=>{});var e});const a=o("directionalHint"),u=Object.assign(Object.assign(Object.assign({type:o("type"),headline:o("headline"),content:o("content"),targetElement:o("targetElement"),targetWindow:o("targetWindow")},a&&{directionalHint:a}),s&&{tourStepContext:s}),c);I.push(u)});const B=null===(r=l)||void 0===r?void 0:r.getElementsByTagName("Actions");let $,D,_=!1;for(const n of Array.from(B)){if(_||n.parentElement!==l.firstChild)continue;_=!0;const{initializerActions:o,tourActions:i}=C(e,t,P(n.outerHTML),"PrimaryButtonAction"),{initializerActions:r,tourActions:c}=C(e,t,P(n.outerHTML),"SecondaryButtonAction");$=null==i?void 0:i[0],D=null==c?void 0:c[0],z.push(...o),z.push(...r)}t(Object(m.c)(n.msdyn_tourid,z));return Object.assign(Object.assign({},n),{tourSteps:I,tourType:d,subcomponentProps:g,primaryButtonAction:$,secondaryButtonAction:D})}catch(t){}},C=(t,e,n,o)=>{var i,r,c,a,u;const l=[],d=[];if(n){const p=null===(i=(new DOMParser).parseFromString(n,"text/xml").getElementsByTagName(o))||void 0===i?void 0:i[0];if(p){const n=p.children;for(const o in n)switch(null===(r=n[o])||void 0===r?void 0:r.nodeName){case s.y:const i=null===(c=n[o])||void 0===c?void 0:c.getAttribute("tabId");l.push(()=>I(e,i));break;case s.e:const r=null===(a=n[o])||void 0===a?void 0:a.getAttribute("webResourceName"),p=null===(u=n[o])||void 0===u?void 0:u.getAttribute("functionName"),b=r.toLowerCase().endsWith(s.f)?r:`${r}${s.f}`;d.push(async()=>{await e(Object(g.d)([b]))}),l.push(()=>e(Object(m.a)(t,b,p)))}}}return{initializerActions:d,tourActions:l}},M=(t,e,n)=>{const{initializerActions:o,tourActions:i}=C(t,e,n,"EntryActions"),{initializerActions:r,tourActions:c}=C(t,e,n,"ExitActions");return{initializerActions:[...o,...r],tourStepActions:{entryActions:i,exitActions:c}}},P=t=>t.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&"),I=(t,e)=>t(function(t){return{type:"tours.gettabstateandselectformtab.sync",sync:!0,execute({dispatch:e,getState:n}){const o=Object(p.f)(n()),i=Object(b.j)(n(),o),r=Object(y.i)(i);Object(l.Sc)(n(),o,t,r)&&e(Object(d.b)(o,t,r))}}}(e))
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */;let z;async function B(t,e,n){let c=null;const a=Object(i.o)(e),l=Object(r.b)(e);try{const e=await t(Object(o.e)(s.n,`${s.o}&${((t,e)=>`$filter=startswith(${t}, '${["",s.i,e].join(s.s)}') and statecode eq 0`)(s.r,a)}`));c=null==e?void 0:e.value.map(e=>E(t,n,e)).filter(t=>((t,e)=>{const n=e===r.a.Phone?s.d:s.b,o=e===r.a.Phone?u.b.Mobile:u.b.Web;return t.tourType===o&&Object(x.a)(t.tourSteps,n)})(t,l))}catch(t){}return null!=c?c:[]}function $(t=!1){return{type:"tours.retrievetours.sync",execute({dispatch:e,getState:n},o){if(!t)return z=B(e,n(),o).then(t=>(e(function(t){return{type:c.d,sync:!0,execute({dispatch:e,getState:n}){const o=Object(a.i)(n());if(H(o,t)){e({type:c.d,payload:{tours:t}})}}}}(t)),z=null,t)),z;if(z)return z;const i=Object(a.i)(n());return Promise.resolve(i)}}}function D(){return{type:"tours.getactivetour.async",execute:async({dispatch:t,getState:e})=>(await t($(!0)),Object(a.a)(e()))}}function _(){return{type:"tours.gettours.async",execute:async({dispatch:t,getState:e})=>(await t($(!0)),Object(a.i)(e()))}}const H=(t,e)=>{if(t.length!==e.length)return!0;const n=new Set(t.map(t=>t.msdyn_tourid));return t.some(t=>!n.has(t.msdyn_tourid))}},nrNG:function(t,e,n){"use strict";n.d(e,"c",(function(){return b})),n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return p}));var o=n("V6aM"),i=n("NjDY"),r=n("3mEc"),c=n("pF61"),s=n("Znsu"),a=n("Z6+u"),u=n("VWP5"),l=n("arV0"),d=n("dHD5");
/**
 * @license Copyright (c) Microsoft Corporation. All rights reserved.
 */
function p(t,e){return{type:a.j,sync:!0,execute({dispatch:n}){const o={tourId:t,initializationStatus:e};n({type:a.j,payload:o})}}}function b(t,e){return{type:a.k,sync:!0,execute({dispatch:n}){const o={tourId:t,initializers:e};n({type:a.k,payload:o})}}}function y(t,e,n){return{type:a.b,execute({dispatch:p,getState:b}){const y=b(),g=Object(r.j)(y,e),m=Object(c.c)(y);if(g){const c=Object(i.x)(y);return t.ScriptManager.initializeContainerForClientApi(m,!1).then(i=>i.loadWebResourcesForAllContexts([g.name],c,3,t=>p(Object(o.a)(t)),!1).then(()=>p(function(t,e,n,o){return{type:a.a,execute(i){const c=i.getState(),a=t.ScriptManager.getContainer(o),p=Object(r.j)(c,e),b=Object(l.j)(c,o),y=Object(d.i)(b),g=Object(d.w)(y),m=t.ClientApiManager.getClientApiEntry(o).xrmObjectCache[g];if(p){const r=p&&p.solutionName,c=p&&p.solutionVersion,l=p&&p.publisherName,d=new u.a(i,o,null,0,{},m,void 0);return a.execute(n,[d],!0,{webResourceName:p&&p.name,solutionName:r,solutionVersion:c,publisherName:l,type:s.h}).catch(n=>{t.TraceManager.getTracer(s.g).error(`Executing webresource failed. ${e} ${l}, ${r}, ${c}, ${n}`)})}}}}(t,e,n,m))))}}}}}}]),window.bundleExecutionMarkers["scripts/retrieveToursActions.js?v=1.4.3886-master"].end=window.performance.now(),window.reportBundleExecutionTimes&&window.reportBundleExecutionTimes();