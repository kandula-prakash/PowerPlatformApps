/*! For license information please see 71.ff3892ca.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{3745:function(t,e,n){"use strict";n.r(e),n.d(e,"withMetadataClient",(function(){return l})),n.d(e,"ConnectedMetadataClientProvider",(function(){return u})),n.d(e,"MetadataClientProvider",(function(){return c})),n.d(e,"withMetadataClientResult",(function(){return p}));var r=n(1105),a=n(245),i=n(3746);function o(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(d){return void n(d)}s.done?e(l):Promise.resolve(l).then(r,a)}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function l(t){return function(e){return a.createElement(t,s({},e,{getMetadataClient:i.getMetadataClient}))}}var d=a.createContext({metadataClient:null,metadataClientCreationStatus:i.MetadataClientCreationStatus.Processing});class u extends a.Component{constructor(t){super(t),this.state={metadataClient:null,metadataClientCreationStatus:i.MetadataClientCreationStatus.Processing}}componentDidMount(){this.createMetadataClient()}componentDidUpdate(t){t.currentEnvironment&&this.props.currentEnvironment&&this.isEnvironmentUpdated(t.currentEnvironment,this.props.currentEnvironment)&&this.createMetadataClient()}render(){var t=this.state;return a.createElement(d.Provider,{value:t},this.props.children)}createMetadataClient(){var t,e=this;return(t=function*(){e.setState({metadataClient:null,metadataClientCreationStatus:i.MetadataClientCreationStatus.Processing});var t=yield Object(i.getMetadataClientWithResult)(e.props.currentEnvironment);e.setState(t)},function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function s(t){o(i,r,a,s,l,"next",t)}function l(t){o(i,r,a,s,l,"throw",t)}s(void 0)}))})()}isEnvironmentUpdated(t,e){return(null==t?void 0:t.id)!==(null==e?void 0:e.id)||!(Object(r.environmentHasCds2Database)(t)||!Object(r.environmentHasCds2Database)(e))}}var c=Object(r.withEnvironment)(u,{wait:!0});function p(t){return function(e){return a.createElement(d.Consumer,null,n=>a.createElement(t,s({},e,n)))}}},3746:function(t,e,n){"use strict";n.r(e),n.d(e,"getMetadataClient",(function(){return c})),n.d(e,"getDevMetadataClient",(function(){return v})),n.d(e,"MetadataClientCreationStatus",(function(){return d})),n.d(e,"isMetadataClientCreationCompleted",(function(){return m})),n.d(e,"getMetadataClientWithResult",(function(){return f}));var r=n(1105),a=n(1146),i=n(217),o=n(3747);function s(t,e,n,r,a,i,o){try{var s=t[i](o),l=s.value}catch(d){return void n(d)}s.done?e(l):Promise.resolve(l).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){s(i,r,a,o,l,"next",t)}function l(t){s(i,r,a,o,l,"throw",t)}o(void 0)}))}}var d,u={};function c(t){return p.apply(this,arguments)}function p(){return(p=l((function*(t){if(t&&t.properties.linkedEnvironmentMetadata){var e=t.properties.linkedEnvironmentMetadata.instanceUrl;if(!u[e]){var s=Object(a.createInstance)({baseURL:"https://cds-org/",withCredentials:g(t),timeout:3e5}),{createCDSClientWithHttpClient:l,LocalizationBehavior:d}=yield Promise.all([n.e(191),n.e(194),n.e(193),n.e(190),n.e(135)]).then(n.bind(null,6223)),c=Object(r.doesCds2EnvironmentSupportApiVersion9_1)(t.properties.linkedEnvironmentMetadata);u[e]=l(s,void 0,{loggingCallbacks:Object(o.createLoggingCallbacksForMCL)(),localizationBehavior:d.LoadResourcesBackground,sessionId:Object(i.getSessionId)(),allowGetRetries:!0,selectivelyAppendFileTypeApiVersion:c,forceStrongConsistency:!0,supportsOSColorEdit:!0})}return u[e]}return Promise.reject("Environment does not contain linkedEnvironmentMetadata")}))).apply(this,arguments)}function v(t){return C.apply(this,arguments)}function C(){return(C=l((function*(t){if(t&&t.properties.linkedEnvironmentMetadata){var e=Object(a.createInstance)({baseURL:"https://cds-org/",withCredentials:g(t),timeout:12e4}),{createCDSClientWithHttpClient:o,LocalizationBehavior:s}=yield Promise.all([n.e(191),n.e(194),n.e(193),n.e(190),n.e(283),n.e(192)]).then(n.t.bind(null,9356,7)),l=Object(r.doesCds2EnvironmentSupportApiVersion9_1)(t.properties.linkedEnvironmentMetadata);return o(e,void 0,{loggingCallbacks:{logTelemetry:t=>{},logError:t=>{},logScenarioStart:t=>{},logScenarioEnd:t=>{},logOperationStart:t=>{},logOperationEnd:t=>{},logRequestStart:t=>{},logRequestEnd:t=>{}},localizationBehavior:s.LoadResourcesBackground,sessionId:Object(i.getSessionId)(),allowGetRetries:!0,selectivelyAppendFileTypeApiVersion:l,forceStrongConsistency:!0})}return Promise.reject("Environment does not contain linkedEnvironmentMetadata")}))).apply(this,arguments)}function m(t){return t!==d.Processing}function f(t){return h.apply(this,arguments)}function h(){return(h=l((function*(t){if(!t.properties.linkedEnvironmentMetadata)return{metadataClient:null,metadataClientCreationStatus:d.NotNeeded,metadataClientCreationMessage:"Environment does not contain linkedEnvironmentMetadata"};try{return{metadataClient:yield c(t),metadataClientCreationStatus:d.Complete}}catch(e){return{metadataClient:null,metadataClientCreationStatus:d.CompleteWithError,metadataClientCreationMessage:e.message||e}}}))).apply(this,arguments)}function g(t){var e=function(t){return t&&t.properties&&t.properties.linkedEnvironmentMetadata&&t.properties.linkedEnvironmentMetadata.version}(t);if(e){var n=e.split("."),r=E.split(".");return n&&n.length>=4&&parseInt(n[0],void 0)>=parseInt(r[0],void 0)&&parseInt(n[1],void 0)>=parseInt(r[1],void 0)&&parseInt(n[2],void 0)>=parseInt(r[2],void 0)&&parseInt(n[3],void 0)>=parseInt(r[3],void 0)}return!1}!function(t){t.Processing="Processing",t.Complete="Complete",t.CompleteWithError="CompleteWithError",t.NotNeeded="NotNeeded"}(d||(d={}));var E="9.1.0.267"}}]);
//# sourceMappingURL=https://sourcemaps.powerapps.com/srcmaps/static/js/module/71.ff3892ca.chunk.js.map